


<div class="" id="kt_wrapper" *ngIf="editButtonCheck">
  <div class="" id="kt_content">
    <div>
      <!-- <div class="d-flex justify-content-start mb-8">
        <button class="btn btn-success btn-lg  me-md-2" type="button" (click)="toggleMode()">
          {{ isEditModeView ? ' View Mode' : ' Edit Mode' }}
        </button>
      </div> -->
      
      
      
    
      <div #gridsterContainer>
        <div class="card" style="width: 100%; height: 100vh; background-color: var(--bs-app-bg-color) !important;">
          <div class="card-body p-0 pb-0"
            style="background-color: var(--bs-app-bg-color) !important; padding: 0 !important;">
            <gridster style="background: var(--bs-app-bg-color)!important;border-radius: 5px;padding: 0px; "
              [options]="options" >

              <gridster-item *ngFor="let item of dashboard; let i = index;" [item]="item"    [style.background-color]="item.themeColor"  class="rounded">
               
       
                <div *ngIf="item.grid_type === 'tile'" >
                  <div class=" grid-item"
                  tabindex="0"
                  [style.background-color]="item.themeColor"
                  style="padding: 20px; position: relative; border-radius: 8px; transition: all 0.3s ease-in-out;"
                  (mouseenter)="isHovered = true"
                  (mouseleave)="isHovered = false"
                 >
                 <div class="row text_3d" >
                  <!-- Display the parameterName -->
                  <div [style.color]="'#333333'" style="font-size: 16px;font-weight: bold; margin-bottom: 10px;">
                    {{ item.parameterName }}
                  </div>
                
                  <!-- Display processed_value from multi_value -->
                  <div  tabindex="0" style="font-size: 28px;font-weight: bold">
                    {{ item.multi_value[1]?.processed_value }}
                  </div>
                </div>
                
               
               <!-- Edit icon button -->
               <div 
               class="action-menu-container d-flex align-items-center" 
               style="position: absolute; top: 10px; right: 10px; gap: 10px;">
             
               <!-- Edit Button -->
               <button 
                 *ngIf="isEditModeView && isHovered" 
                 (click)="openKPIModal(KPIModal, item, i)" 
                 class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" 
                 aria-haspopup="menu" 
                 aria-expanded="false" 
                 style="background: none; border: none; cursor: pointer;">
                 <i class="bi bi-pencil" style="color:black;"></i> <!-- Edit Icon -->
               </button>
             
               <!-- Dropdown Menu -->
               <div *ngIf="isEditModeView " class="dropdown">
                <button
              
                [matMenuTriggerFor]="menu"
                class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" >
                <i class="bi bi-three-dots-vertical" style="color: var(--bs-body-color);"></i>
              </button>
            
              <mat-menu #menu="matMenu" class="mat-elevation-z4">
                <button mat-menu-item (click)="duplicateTile(item, i)">
                  <i class="bi bi-files fs-4"></i>
                  <span>Duplicate</span>
                </button>
                <button mat-menu-item (click)="deleteTile(item, i)">
                  <i class="bi bi-trash fs-4"></i>
                  <span>Delete</span>
                </button>
                
              </mat-menu>
              </div>
              
              
              
             </div>
             
         
             
             








               <!-- (contextmenu)="openContextMenu($event, item, i)" -->
               <!-- Context Menu -->
               <!-- <mat-menu #contextMenu="matMenu">
                 <button mat-menu-item (click)="deleteTile(item, i)">Delete Tile</button>
                 <button mat-menu-item (click)="duplicateTile(item, i)">Duplicate Tile</button>
                 <button mat-menu-item (click)="refreshTile(item, i)">Refresh Tile</button>
               </mat-menu> -->
             
             </div>
             
             
                </div>
                
                  
                  
                  <div *ngIf="item.grid_type === 'tile2'" >
                    <div class="grid-item"
                         tabindex="0"
                         [style.background-color]="item.themeColor" 
                         style="padding: 20px; position: relative; border-radius: 8px; transition: all 0.3s ease-in-out;"
                         (mouseenter)="isHovered = true"
                         (mouseleave)="isHovered = false">

                         <div class="row text_3d" >
                         <div [style.color]="'#333333'" style="font-size: 16px; font-weight: bold; margin-bottom: 10px;">
                          {{ item.parameterName }}
                        </div>
                        <div class="value" tabindex="0" style="font-size: 20px; font-weight: bold; color: #333333;">
                          {{ item.multi_value[2]?.processed_value }} <!-- Access the second element in multi_value array -->
                        </div>
                        <div class="value" tabindex="0" style="font-size: 16px; font-weight: bold; color: #333333;">
                          {{ item.multi_value[1]?.value }} <!-- Access the second element in multi_value array -->
                        </div>
                         </div>
                        <div 
                        class="action-menu-container d-flex align-items-center" 
                        style="position: absolute; top: 10px; right: 10px; gap: 10px; z-index: 1000;">
                        
                        <!-- Edit Icon Button -->
                        <button 
                          *ngIf="isEditModeView && isHovered" 
                          (click)="openKPIModal1(KPIModal1, item, i)" 
                          class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" 
                          aria-haspopup="menu" 
                          aria-expanded="false" 
                          style="background: none; border: none; cursor: pointer;">
                          <i class="bi bi-pencil" style="color: black;"></i> <!-- Edit icon -->
                        </button>
                      
                        <!-- Dropdown Menu -->
                        <div 
                          *ngIf="isEditModeView " 
                          class="dropdown" 
                          style="position: relative;">
                          <button
              
                          [matMenuTriggerFor]="menu"
                          class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" >
                          <i class="bi bi-three-dots-vertical" style="color: var(--bs-body-color);"></i>
                        </button>
                      
                        <mat-menu #menu="matMenu" class="mat-elevation-z4">
                          <button mat-menu-item (click)="duplicateTile1(item, i)">
                            <i class="bi bi-files fs-4"></i>
                            <span>Duplicate</span>
                          </button>
                          <button mat-menu-item (click)="deleteTile(item, i)">
                            <i class="bi bi-trash fs-4"></i>
                            <span>Delete</span>
                          </button>
                        </mat-menu>
                        </div>
                      </div>
                      
                    </div>
                  </div>

                  <div *ngIf="item.grid_type === 'tile3'" >
                    <div class="grid-item"
                    tabindex="0"
                    [style.background-color]="item.themeColor"  
                    style="padding: 20px; position: relative; border-radius: 8px; transition: all 0.3s ease-in-out;"
                    (mouseenter)="isHovered = true"
                    (mouseleave)="isHovered = false">
                    <div class="row text_3d" >
               
                 <!-- Display the parameterName -->
                 <div [style.color]="'#333333'" style="font-size: 16px; font-weight: bold; margin-bottom: 10px;">
                   {{ item.parameterName }}
                 </div>

                 <div class="value" tabindex="0" style="font-size: 16px; font-weight: bold; color: #333333;">
                  {{ item.multi_value[1]?.value }} <!-- Access the second element in multi_value array -->
                </div>
               
                 <!-- Display processed_value from multi_value -->
                 <div class="value" tabindex="0" style="font-size: 20px; font-weight: bold; color: #333333;">
                   {{ item.multi_value[3]?.processed_value }} <!-- Access the second element in multi_value array -->
                 </div>
                 <div class="value" tabindex="0" style="font-size: 16px; font-weight: bold; color: #333333;">
                  {{ item.multi_value[2]?.value }} <!-- Access the second element in multi_value array -->
                </div>
                    </div>
               
                 <!-- Edit icon button -->

                 <div 
                 class="action-menu-container d-flex align-items-center justify-content-end" 
                 style="position: absolute; top: 10px; right: 10px; gap: 10px; z-index: 1000;">
                 
                 <!-- Edit Icon Button -->
                 <button 
                   *ngIf="isEditModeView && isHovered" 
                   (click)="openKPIModal2(KPIModal2, item, i)" 
                   class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" 
                   aria-haspopup="menu" 
                   aria-expanded="false" 
                   style="background: none; border: none; cursor: pointer;">
                   <i class="bi bi-pencil" style="color: black;"></i>
                 </button>
               
                 <!-- Dropdown Menu -->
                 <div 
                   *ngIf="isEditModeView " 
                   class="dropdown" 
                   style="position: relative;">
                   <button
              
                   [matMenuTriggerFor]="menu"
                   class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" >
                   <i class="bi bi-three-dots-vertical" style="color: var(--bs-body-color);"></i>
                 </button>
               
                 <mat-menu #menu="matMenu" class="mat-elevation-z4">
                   <button mat-menu-item (click)="duplicateTile2(item, i)">
                    <i class="bi bi-files fs-4"></i>
                     <span>Duplicate</span>
                   </button>
                   <button mat-menu-item (click)="deleteTile(item, i)">
                    <i class="bi bi-trash fs-4"></i>
                     <span>Delete</span>
                   </button>
                 </mat-menu>
                 </div>
               </div>
               
               
               </div>
               
                  </div>

                  <div *ngIf="item.grid_type === 'tile4'">
                    <div 
                      class="grid-item"
                      tabindex="0"
                      [style.background-color]="item.themeColor"
                      style="padding: 20px; position: relative; border-radius: 8px; transition: all 0.3s ease-in-out;"
                      (mouseenter)="isHovered = true"
                      (mouseleave)="isHovered = false">
                      
                      <!-- Up Arrow Icon -->
               
                      <div class="row text_3d" >
                      <!-- Display the parameterName -->
                      <div 
                        [style.color]="'#333333'" 
                        style="font-size: 16px; font-weight: bold; margin-bottom: 10px;">
                        {{ item.parameterName }}
                      </div>
                  
                      <!-- Display processed_value from multi_value -->
                      <div 
                        class="value" 
                        tabindex="0" 
                        style="font-size: 28px; font-weight: bold; color: #333333;">
                        {{ item.multi_value[3]?.processed_value }}
                        <i 
                        class="bi bi-arrow-up fs-2x" 
                        style="font-size: 20px; color:green;" 
                        aria-label="Increase">
                      </i>
                      </div>
                    </div>
                
                  
                      <!-- Edit icon button -->
                      <div 
                        class="action-menu-container d-flex align-items-center justify-content-end" 
                        style="position: absolute; top: 10px; right: 10px; gap: 10px; z-index: 1000;">
                        <button 
                          *ngIf="isEditModeView " 
                          (click)="openKPIModal3(KPIModal3, item, i)" 
                          class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" 
                          aria-haspopup="menu" 
                          aria-expanded="false" 
                          style="background: none; border: none; cursor: pointer;">
                          <i class="bi bi-pencil" style="color:black"></i>
                        </button>
                  
                        <div 
                          *ngIf="isEditModeView" 
                          class="dropdown" 
                          style="position: relative;">
                          <button
              
                          [matMenuTriggerFor]="menu"
                          class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" >
                          <i class="bi bi-three-dots-vertical" style="color: var(--bs-body-color);"></i>
                        </button>
                      
                        <mat-menu #menu="matMenu" class="mat-elevation-z4">
                          <button mat-menu-item (click)="duplicateTile3(item, i)">
                            <i class="bi bi-files fs-4"></i>
                            <span>Duplicate</span>
                          </button>
                          <button mat-menu-item (click)="deleteTile(item, i)">
                            <i class="bi bi-trash fs-4"></i>
                            <span>Delete</span>
                          </button>
                        </mat-menu>
                        </div>
                      </div>
                    </div>
                  </div>
                  


                  <div *ngIf="item.grid_type === 'tile5'" >
                    <div class="grid-item"
                         tabindex="0"
                         [style.background-color]="item.themeColor" 
                         style="padding: 20px; position: relative; border-radius: 8px; transition: all 0.3s ease-in-out;"
                         (mouseenter)="isHovered = true"
                         (mouseleave)="isHovered = false">

                         <div class="row text_3d" >
                         <div [style.color]="'#333333'" style="font-size: 16px; font-weight: bold; margin-bottom: 10px;">
                          {{ item.parameterName }}
                        </div>
                        <div class="value" tabindex="0" style="font-size: 20px; font-weight: bold; color: #333333;">
                          {{ item.multi_value[3]?.processed_value }} <!-- Access the second element in multi_value array -->
                          <i 
                          class="bi bi-arrow-up fs-2x" 
                          style="font-size: 20px; color:green" 
                          aria-label="Increase">
                        </i>
                        </div>
                        <div class="value" tabindex="0" style="font-size: 16px; font-weight: bold; color: #333333;">
                          {{ item.multi_value[4]?.value }} <!-- Access the second element in multi_value array -->
                        </div>
                         </div>
                        <div 
                        class="action-menu-container d-flex align-items-center justify-content-end" 
                        style="position: absolute; top: 10px; right: 10px; gap: 10px; z-index: 1000;">
                      <!-- Edit icon button -->
                      <button *ngIf="isEditModeView&&isHovered" 
                      (click)="openKPIModal4(KPIModal4, item, i)" 
                      class="mat-icon-button btn btn-icon btn-custom  btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" 
                      aria-haspopup="menu" 
                      aria-expanded="false" 
                      style="background: none; border: none; cursor: pointer;">
                <i class="bi bi-pencil" style="color:black"></i> <!-- Edit icon -->
              </button>

              <div 
              *ngIf="isEditModeView " 
              class="dropdown" 
              style="position: relative;">
              <button
              
              [matMenuTriggerFor]="menu"
              class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" >
              <i class="bi bi-three-dots-vertical" style="color: var(--bs-body-color);"></i>
            </button>
          
            <mat-menu #menu="matMenu" class="mat-elevation-z4">
              <button mat-menu-item (click)="duplicateTile4(item, i)">
                <i class="bi bi-files fs-4"></i>
                <span>Duplicate</span>
              </button>
              <button mat-menu-item (click)="deleteTile(item, i)">
                <i class="bi bi-trash fs-4"></i>
                <span>Delete</span>
              </button>
            </mat-menu>
            </div>
                        </div>
                    </div>
                  </div>

                  <!-- <div class="grid-item" tabindex="0"  (click)="openKPIModal6(KPIModal6,'')" >
                    <div>Bullet Chart</div>
                    <div class="chart">
                      <div class="bullet-bar" tabindex="0"></div>
                    </div>
                  </div> -->

                  <div *ngIf="item.grid_type === 'tile6'" >
                    <div class="grid-item"
                    tabindex="0"
                    [style.background-color]="item.themeColor"  
                    style="padding: 20px; position: relative; border-radius: 8px; transition: all 0.3s ease-in-out;"
                    (mouseenter)="isHovered = true"
                    (mouseleave)="isHovered = false">
               
                 <!-- Display the parameterName -->
                 <div class="row text_3d" >
                 <div [style.color]="'#333333'" style="font-size: 16px; font-weight: bold; margin-bottom: 10px;">
                   {{ item.parameterName }}
                 </div>

                 <div class="value" tabindex="0" style="font-size: 16px; font-weight: bold; color: #333333;">
                  {{ item.multi_value[1]?.value }} <!-- Access the second element in multi_value array -->
                </div>
               
                 <!-- Display processed_value from multi_value -->
                 <div class="value" tabindex="0" style="font-size: 20px; font-weight: bold; color: #333333;">
                   {{ item.multi_value[3]?.processed_value }} <!-- Access the second element in multi_value array -->
                   <i 
                   class="bi bi-arrow-up fs-2x" 
                   style="font-size: 20px; color:green" 
                   aria-label="Increase">
                 </i>
                 </div>
                 <div class="value" tabindex="0" style="font-size: 16px; font-weight: bold; color: #333333;">
                  {{ item.multi_value[2]?.value }} <!-- Access the second element in multi_value array -->
                </div>
                 </div>
               
                 <!-- Edit icon button -->
                 <div 
                 class="action-menu-container d-flex align-items-center justify-content-end" 
                 style="position: absolute; top: 10px; right: 10px; gap: 10px; z-index: 1000;">
                 <button *ngIf="isEditModeView&&isHovered" 
                         (click)="openKPIModal5(KPIModal5, item, i)" 
                         class="mat-icon-button btn btn-icon btn-custom  btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" 
                         aria-haspopup="menu" 
                         aria-expanded="false" 
                         style="background: none; border: none; cursor: pointer;">
                   <i class="bi bi-pencil" style="color:black"></i> <!-- Edit icon -->
                 </button>
                 <div 
                 *ngIf="isEditModeView " 
                 class="dropdown" 
                 style="position: relative;">
                 <button
              
                 [matMenuTriggerFor]="menu"
                 class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" data-bs-auto-close="outside" >
                 <i class="bi bi-three-dots-vertical" style="color: var(--bs-body-color);"></i>
               </button>
             
               <mat-menu #menu="matMenu" class="mat-elevation-z4">
                 <button mat-menu-item (click)="duplicateTile5(item, i)">
                  <i class="bi bi-files fs-4"></i>
                   <span>Duplicate</span>
                 </button>
                 <button mat-menu-item (click)="deleteTile(item, i)">
                  <i class="bi bi-trash fs-4"></i>
                   <span>Delete</span>
                 </button>
               </mat-menu>
               </div>
                 </div>
               
               </div>
               
                  </div>
                  <div *ngIf="item.grid_type === 'tile7'" style="background-color: gray">
                
                    <div class="grid-item "
                         tabindex="0"
                         style="background-color: gray; position: relative;"
                         (mouseenter)="isHovered = true"
                         (mouseleave)="isHovered = false">
                      <div [style.color]="'white'">{{ item.formlist }}</div>
                      <div class="bullet-bar" tabindex="0"></div>
                      
                      <!-- Edit icon button -->
                      <button 
                        *ngIf="isEditModeView&&isHovered" 
                        (click)="openKPIModal6(KPIModal6, item, i)" 
                        class="mat-icon-button btn btn-icon btn-custom btn-icon-muted btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" 
                        aria-haspopup="menu" 
                        aria-expanded="false" 
                        style="position: absolute; top: 3px; right: -2px; background: none; border: none; cursor: pointer;">
                        <i class="bi bi-pencil" style="color: var(--bs-body-color);"></i> <!-- Edit icon -->
                      </button>
           
                    </div>
                  </div>



                  <div *ngIf="item.grid_type === 'title'" >
                    <div 
                    class="gridster-item title-widget"
                    tabindex="0"
                    [style.background-color]="item.themeColor"
              
                    (mouseenter)="isHovered = true"
                    (mouseleave)="isHovered = false"
                  >
                    <div class="row ">
                      <!-- Display the parameterName -->
                      <div class="text_3d"
                    
                      [style.font-size]="item.fontSize" 
                      [style.font-weight]="item.fontWeight" 
                      [style.text-align]="item.textAlign" 
                      [style.color]="item.textColor"

                      >
                      {{ item.customLabel }}
                    </div>
                      <!-- Display processed_value from multi_value -->
                    </div>
                  
                    <!-- Action Menu -->
                    <div 
                      class="action-menu-container d-flex align-items-center" 
                      style="position: absolute; top: 10px; right: 10px; gap: 10px;">
                      <!-- Edit Button -->
                      <button 
                        *ngIf="isEditModeView " 
                        (click)="openTitleModal(TitleModal, item, i)" 
                        class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" 
                        aria-haspopup="menu" 
                        aria-expanded="false" 
                        style="background: none; border: none; cursor: pointer;">
                        <i class="bi bi-pencil" style="color:black;"></i> <!-- Edit Icon -->
                      </button>
                  
                      <!-- Dropdown Menu -->
                      <div 
                      *ngIf="isEditModeView" 
                      class="dropdown" 
                      (mouseenter)="onMouseEnter()"
                      (mouseleave)="onMouseLeave()"
                    >
                    <button
              
                    [matMenuTriggerFor]="menu"
                    class="mat-icon-button btn btn-icon btn-custom btn-active-light btn-active-color-primary w-25px h-25px w-md-20px h-md-20px" data-bs-auto-close="outside" >
                    <i class="bi bi-three-dots-vertical" style="color: var(--bs-body-color);"></i>
                  </button>
                
                  <mat-menu #menu="matMenu" class="mat-elevation-z4">
                    <button mat-menu-item (click)="duplicateTile5(item, i)">
                      <i class="bi bi-files fs-4"></i>
                      <span>Duplicate</span>
                    </button>
                    <button mat-menu-item (click)="deleteTile(item, i)">
                      <i class="bi bi-trash fs-4"></i>
                      <span>Delete</span>
                    </button>
                  </mat-menu>
                    </div>
                    
                    </div>
                  </div>
                  
               
               
                  </div>



       
              </gridster-item>
              

            </gridster>
            <div class="theEnd"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




<!-- <h1 *ngIf="!editButtonCheck">iam landing page</h1> -->
<div class="row">
<div class="col-xl-7" *ngIf="!editButtonCheck">
  <!-- Begin Engage widget 9 -->
  <div class="card h-lg-100" style="background: linear-gradient(112.14deg, #FF8A00 0%, #E96922 100%)">
    <!-- Begin Body -->
    <div class="card-body">
      <!-- Begin Row -->
      <div class="row align-items-center">
        <!-- Begin Left Column -->
        <div class="col-sm-7 pe-0 mb-5 mb-sm-0">
          <!-- Begin Wrapper -->
          <div class="d-flex justify-content-between h-100 flex-column pt-5 pb-2 ps-4 pe-4">
            <!-- Begin Container -->
            <div class="mb-4 ms-3">
              <!-- Begin Title -->
              <h1 class="fs-2x fw-bold text-white">Summary Dashboard</h1>
              <h4 class="fs-4 fw-semibold text-white ms-1">Unleash the Power of Data with Intuitive Dashboards!</h4>

              <!-- End Title -->
            </div>
            
            <!-- End Container -->
            <div class="d-flex align-items-center gap-4 ms-3" style="text-align: left;">
              <!-- Begin Create Button -->
              <button data-bs-toggle="tooltip" title="Create Dashboard"
                  class="btn btn-color-white bg-white bg-opacity-15 bg-hover-opacity-25 fw-semibold d-flex align-items-center"  (click)="openModal('new', null, summaryModal)">
                  <i class="bi bi-plus-square-fill fs-3 text-white me-2"></i>Create
              </button>
              <!-- End Create Button -->
              
              <!-- Begin Location Button -->
              <button type="button" data-bs-toggle="modal" data-bs-target="#myModalLocation"
                  class="btn btn-color-white bg-white bg-opacity-15 bg-hover-opacity-25 fw-semibold d-flex align-items-center">
                  <i class="bi bi-geo-alt fs-3 text-white me-2"></i> Location
              </button>
              <!-- End Location Button -->
          </div>
          
            <!-- Begin Button Container -->

            <!-- End Button Container -->
          </div>
          <!-- End Wrapper -->
        </div>
        <!-- End Left Column -->

        <!-- Begin Right Column -->
        <div class="col-sm-5 text-center">
          <!-- Begin Illustration -->
          <img src="./assets/media/svg/illustrations/easy/1.svg" class="h-200px h-lg-250px my-n6" alt="">
          <!-- End Illustration -->
        </div>
        <!-- End Right Column -->
      </div>
      <!-- End Row -->
    </div>
    <!-- End Body -->
  </div>
  <!-- End Engage widget 9 -->
</div>


<div class="col-xl-5" *ngIf="!editButtonCheck">
  <div id="kt_player_widget_2" class="card card-flush h-xl-100">
    <div class="card-body card-rounded bg-black pt-0" style="padding: 0px !important;">
      <iframe
        src="https://www.youtube.com/embed/_T_M_oiFS68?enablejsapi=1&amp;controls=1&amp;modestbranding=1&amp;rel=0"
        frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""
        class="embed-responsive-item rounded youtube-iframe" style="overflow: hidden; height: 100%; width: 100%;"
        id="widget2" title="Master Your IoT Apps with Powerboard!!!">
      </iframe>
      <div class="video-controls">
      </div>
    </div>
  </div>
</div>
</div>




<div class="col-xl-12" style="margin-top: 20px;" *ngIf="!editButtonCheck">
  <!--begin::Table widget 15-->
  <div class="card card-flush h-lg-100">
    <!--begin::Header-->
    <div class="card-header pt-7">
      <h3 class="card-title align-items-start flex-column">
        <span class="card-label fw-bold text-gray-800">Latest 20 Updated</span>
      </h3>
      <div class="card-toolbar">
        <a href="javascript:void(0);" (click)="openSummaryTable(content)" class="btn btn-sm btn-light-primary">
          View All
        </a>
      </div>
    </div>
    <!--end::Header-->

    <!--begin::Body-->
    <div class="card-body pt-6">
      <div class="table-responsive">
        <table class="table table-row-dashed align-middle gs-0 gy-3 my-0">
          <!--begin::Table head-->
          <thead>
            <tr class="fs-7 fw-bold text-gray-500 border-bottom-0">
              <th class="fw-bold text-dark fs-4">Id</th>
              <th class="text-start fw-bold text-dark fs-4">Name</th>
              <th class="text-start fw-bold text-dark fs-4">Description</th>
              <th class="text-start fw-bold text-dark fs-4">Updated</th>
              <th class="text-start fw-bold text-dark fs-4">Created</th>
              <th class="text-start fw-bold text-dark fs-4">View</th>
            </tr>
          </thead>
          <!--end::Table head-->

          <!--begin::Table body-->
          <tbody *ngIf="lookup_data_summaryCopy && lookup_data_summaryCopy.length > 0; else noDataTemplate">
            <tr *ngFor="let item of lookup_data_summaryCopy | slice:0:20">
              <td>
                <div class="d-flex align-items-center">
                  <span class="text-gray-500 fw-semibold d-block fs-7 me-2">
                    <div class="symbol symbol-50px me-5">
                      <span [class]="item.parsedIcon?.class2">
                        <app-keenicon [name]="item.parsedIcon?.value" [class]="item.parsedIcon?.class1"
                          style="display: contents;"></app-keenicon>
                      </span>
                    </div>
                  </span>
                  <div class="d-flex justify-content-start flex-column">
                    <a class="text-gray-800 fw-bold text-hover-primary mb-1 fs-6"
                      (click)="viewItem(item.P1); $event.preventDefault()">{{ item.P1 }}</a>
                  </div>
                </div>
              </td>
              <td class="text-start">
                <span class="text-gray-600 fw-bold fs-6" (click)="viewItem(item.P1); $event.preventDefault()">{{ item.P2 }}</span>
              </td>
              <td class="text-start">
                <span class="text-gray-600 fw-bold fs-6" (click)="viewItem(item.P1); $event.preventDefault()">{{ item.P3 }}</span>
              </td>
              <td class="text-start">
                <span class="text-gray-600 fw-bold fs-6" style="padding-left: 5px;" (click)="viewItem(item.P1); $event.preventDefault()">
                  {{ convertToIST(item.P4) }}
                </span>
              </td>
              <td class="text-start">
                <span class="text-gray-600 fw-bold fs-6" (click)="viewItem(item.P1); $event.preventDefault()">
                  {{ convertToIST(item.P5) }}
                </span>
              </td>
              <td class="text-start">
                <a href="javascript:void(0);" (click)="viewItem(item.P1); $event.preventDefault()"
                  class="btn btn-sm btn-icon btn-bg-light btn-active-color-primary w-30px h-30px">
                  <i class="ki-duotone ki-black-right fs-2 text-gray-500"></i>
                </a>
              </td>
            </tr>
          </tbody>
          <!--end::Table body-->

          <!--begin::No data template-->
          <ng-template #noDataTemplate>
            <tbody>
              <tr>
                <td colspan="6" class="text-center text-gray-500">
                  No data available
                </td>
              </tr>
            </tbody>
          </ng-template>
          <!--end::No data template-->
        </table>
      </div>
      <!--end::Table-->
    </div>
    <!--end: Card Body-->
  </div>
  <!--end::Table widget 15-->
</div>











<ngx-spinner 
  *ngIf="loading" 
  bdColor="rgba(0, 0, 0, 0.8)" 
  size="medium" 
  color="#fff" 
  type="square-jelly-box" 
  [fullScreen]="true">
  <p style="color: white">Loading Widgets, please wait...</p>
</ngx-spinner>
<div style="top: 1%;
z-index: 100;
right:44px;
flex-direction: column;" class=" d-flex position-fixed fw-bolder zindex-2  mt-20 gap-2">

<nav class="myMenu" #tooltipContainer>
  <input type="checkbox" href="#" class="myMenu-open" name="myMenu-open" id="myMenu-open" />
  <label class="myMenu-open-button" for="myMenu-open">
    <span class="hamburger hamburger-1"></span>
    <span class="hamburger hamburger-2"></span>
    <span class="hamburger hamburger-3"></span>
  </label>
  <!--  -->
  <a title="Add Dashboard" class="myMenu-item" (click)="openModal('new',null, summaryModal)"> <i style="color: white;"
      class="fa fa-plus"></i> </a>
  <a class="myMenu-item" #myLink *ngIf="editButtonCheck" title="Edit Dashboard"
    (click)="openModal('edit',all_Packet_store, summaryModal)"> <i style="color: white;" class="fa fa-edit"></i> </a>
  <a class="myMenu-item" data-bs-toggle="modal" data-bs-placement="left" title="Location" data-bs-target="#myModal"
    routerLink="/summary-engine">
    <i style="color: white;" class="fa fa-home"></i> </a>
  <!-- <a class="myMenu-item" (click)="openSummaryTable(content)" title="Search dashboard"> <i style="color: white;"
      class="fa fa-search"></i> </a> -->



  <a *ngIf="!isSummaryEngine()" class="myMenu-item" (click)="openSummaryTable(content)" title="Search dashboard">
    <i style="color: white;" class="fa fa-search"></i>
  </a>
<!-- 
        <div class="d-flex justify-content-start mb-8">
        <button class="btn btn-success btn-lg  me-md-2" type="button" (click)="toggleMode()">
          {{ isEditModeView ? ' View Mode' : ' Edit Mode' }}
        </button>
      </div> -->

  <!-- <a *ngIf="!isSummaryEngine()" class="myMenu-item"  title="Search dashboard" (click)="toggleMode()">
    {{ isEditModeView ? ' View Mode' : ' Edit Mode' }}
    <i style="color: white;" class="fa fa-search"></i>
  </a> -->

<!-- NGX Spinner -->


<!-- View/Edit Mode Toggle -->
<a *ngIf="!isSummaryEngine()" 
   class="myMenu-item" 
   (click)="toggleMode()" 
   style="cursor: pointer;">
  <i 
    style="color: white;" 
    class="fa" 
    [ngClass]="isEditModeView ? 'fa-eye' : 'fa-pencil-alt'">
  </i>
  <span *ngIf="false" style="font-size: 14px;">
    {{ isEditModeView ? ' View Mode' : ' Edit Mode' }}
  </span>
</a>







  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" style="width:50px;height:50px">
    <defs>
      <filter id="shadowed-goo">

        <feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="10" />
        <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />
        <feGaussianBlur in="goo" stdDeviation="3" result="shadow" />
        <feColorMatrix in="shadow" mode="matrix" values="0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 -0.2"
          result="shadow" />
        <feOffset in="shadow" dx="1" dy="1" result="shadow" />
        <feComposite in2="shadow" in="goo" result="goo" />
        <feComposite in2="goo" in="SourceGraphic" result="mix" />
      </filter>
      <filter id="goo">
        <feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="10" />
        <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />
        <feComposite in2="goo" in="SourceGraphic" result="mix" />
      </filter>
    </defs>
  </svg>

</nav>
</div>




<ng-template #content let-modal>
<div class="modal-header">
  <h4 class="modal-title">Summary Configuration</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
</div>
<div class="modal-body">
  <div class="card-body pt-0">

    <app-crud-summary [datatableConfig]="datatableConfig" route="/summary-engine"
      (deleteEvent)="delete($event);modal.dismiss()" (editEvent)="edit($event);modal.dismiss()"
      (createEvent)="create()" [reload]="reloadEvent"></app-crud-summary>
      <table #dataTable class="table table-striped table-bordered"></table>
  </div>

</div>
<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
</div>
</ng-template>


<style>
.grid-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* Use 1fr for equal column width */
    grid-template-rows: 120px; /* Decrease fixed row height */
    grid-auto-rows: 120px; /* Decrease height for additional rows */
    grid-gap: 10px;
    max-width: 750px; /* Increase max width of the container */
    margin: 20px auto;
    margin-top: 20px;
    justify-items: stretch; /* Ensures grid items stretch to fill available space */
}

.grid-item {
    background-color: #e0e0e0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    color: #333;
    text-align: center;
    border-radius: 5px;
    outline: none; /* Remove default focus outline */
    cursor: pointer; /* Show pointer cursor */
    pointer-events: auto; /* Ensures interactivity */
    overflow: visible; /* Allows any overflowing content to be visible */
    height: 100%; /* Ensures each item stretches to fill its grid cell */
}

/* .grid-item:focus {
    outline: 2px solid blue; 
} */

.value {
    font-size: 24px;
    font-weight: bold;
}

.up-arrow {
    color: green;
}

.chart {
    width: 100%;
    height: 40px;
    background-color: #ccc;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
}

.bullet-bar {
    width: 60%;
    height: 10px;
    background-color: blue;
    margin: 0 5px;
}
</style>



<ng-template #summaryModal let-modal>
<div class="modal-header">
  <h2 class="modal-title">{{ showHeading ? 'Add Summary' : 'Edit Summary' }}</h2>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
</div>


<div class="modal-body">
  <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bolder flex-nowrap" id="myTab" role="tablist">
    <div class="row w-100">
      <div class="col-6" role="Add Dashboard">
        <li class="nav-item">
          <a class="nav-link text-active-primary me-6" id="add-dashboard-tab" data-bs-toggle="tab"

          [class.active]="selectedTab === 'add-dashboard'" 
            (click)="selectedTab = 'add-dashboard'" role="tab" aria-controls="add-dashboard" aria-selected="true">
            {{ showModal ? 'Edit Dashboard' : 'Add Dashboard' }}
          </a>
        </li>
      </div>
      

      <!-- Conditionally Display Add Widgets Tab -->
      <div class="col-6" role="Add Widgets">
        <li class="nav-item">
          <a class="nav-link text-active-primary me-6" id="add-widget-tab" data-bs-toggle="tab"
          [class.active]="selectedTab === 'add-widget'" 
            (click)="showAddWidgetsTab ? selectedTab = 'add-widget' : onAddWidgetTabClick()"
            role="tab" aria-controls="add-widget" aria-selected="false">Add Widgets</a>
        </li>
      </div>
      

      <!-- <div class="col-4" role="Autoflow Config">
        <li class="nav-item">
          <a class="nav-link text-active-primary me-6" id="autoflow-config-tab" data-bs-toggle="tab"
            (click)="onAutoflowConfigTabClick()"
            role="tab" aria-controls="autoflow-config" aria-selected="false">Autoflow Config</a>
        </li>
      </div> -->
    </div>
  </ul>



  <div class="tab-content" id="myTabContent">
    <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTab === 'add-dashboard'}" id="add-dashboard" role="tabpanel" aria-labelledby="add-dashboard-tab">
      <form [formGroup]="createSummaryField">
        <div class="container">
          <div class="row mb-3">
            <div class="col-12">
              <!-- <label class="col-form-label fw-bold fs-6 required">Add Dashboard</label> -->
            </div>
          </div>
          <div class="row">
            <!-- Summary ID Input -->
<!-- Summary ID Input -->
<div class="col-md-4">
  <label class="col-form-label fw-bold fs-6 required d-flex align-items-center">
    ID 
    <span class="fs-4 text-primary" 
          data-bs-toggle="tooltip" 
          data-bs-placement="top" 
          [title]="showModal ? '' : 'Enter a unique identifier for the summary.'">
      <i class="bi bi-info-circle fs-5"></i>
    </span>
  </label>
  <input type="text"
         class="form-control form-control-solid"
         placeholder="Enter Summary ID"
         formControlName="summaryID"
         [readonly]="showModal" 
         required
         (keyup)="checkUniqueIdentifier()">
  <span *ngIf="errorForUniqueID" style="color: #fc1900;">{{ errorForUniqueID }}</span>
  <div *ngIf="createSummaryField.get('summaryID')?.hasError('required') && createSummaryField.get('summaryID')?.touched"
       class="invalid-feedback">
    Summary ID is required
  </div>
</div>

<!-- Summary Name Input -->
<div class="col-md-4">
  <label class="col-form-label fw-bold fs-6 required d-flex align-items-center">
    Name 
    <span class="ms-2 text-primary" 
          data-bs-toggle="tooltip" 
          data-bs-placement="top" 
          [title]="showModal ? 'To change name for the summary.' : 'Enter a unique name for the summary.'">
      <i class="bi bi-info-circle fs-5"></i>
    </span>
  </label>
  <input type="text"
         class="form-control form-control-solid"
         placeholder="Enter Summary Name"
         formControlName="summaryName"
         required
         (keyup)="checkUniqueName()">
  <span *ngIf="errorForUniqueName" style="color: #fc1900;">{{ errorForUniqueName }}</span>
  <div *ngIf="createSummaryField.get('summaryName')?.hasError('required') && createSummaryField.get('summaryName')?.touched"
       class="invalid-feedback">
    Summary Name is required
  </div>
</div>

<!-- Summary Description Input -->
<div class="col-md-4">
  <label class="col-form-label fw-bold fs-6 required d-flex align-items-center">
    Description 
    <span class="ms-2 text-primary" 
          data-bs-toggle="tooltip" 
          data-bs-placement="top" 
          [title]="showModal ? 'To change the description of the summary.' : 'Provide a brief description of the summary.'">
      <i class="bi bi-info-circle fs-5"></i>
    </span>
  </label>
  <input type="text" 
         class="form-control form-control-solid" 
         placeholder="Enter Summary Description"
         formControlName="summarydesc" 
         required>
  <div *ngIf="createSummaryField.get('summarydesc')?.hasError('required') && createSummaryField.get('summarydesc')?.touched"
       class="invalid-feedback">
    Summary Description is required
  </div>
</div>

          </div>
          
          
          

          <div class="row mb-3">
            <div class="col-md-4">
              <label class="col-form-label fw-bold fs-6 required" for="icon-select">Select an Icon:</label>
              <select id="icon-select" formControlName="iconSelect" class="form-control" (change)="previewIcon($event)">
                <option value="null">Select an option</option>
                <ng-container *ngFor="let icon of iconsList">
                  <option [value]="icon.value">{{ icon.label }}</option>
                </ng-container>
              </select>
            </div>

            <div class="col-md-4 d-flex align-items-center">
              <p class="fw-bold fs-6 mb-0 me-2">Selected Icon:</p>
              <span class="menu-icon" *ngIf="previewObjDisplay; else noIcon">
                  <app-keenicon 
                      [name]="previewObjDisplay.value"
                      [class]="previewObjDisplay.class1"
                      class="fs-4x">
                  </app-keenicon>
              </span>
              <ng-template #noIcon>
                  <span class="text-muted">No icon selected</span>
              </ng-template>
          </div>
          
          </div>

          <!-- JSON Data Input -->
          <!-- <div class="row">
            <div class="col-md-12">
              <label class="col-form-label fw-bold fs-6 required">Grids</label>
              <textarea class="form-control form-control-solid" placeholder="Enter JSON data"
                formControlName="jsonInputControl"
                style="resize: vertical; min-height: 100px; max-height: 300px;"></textarea>
              <div
                *ngIf="createSummaryField.get('jsonInputControl')?.hasError('invalidJson') && createSummaryField.get('jsonInputControl')?.touched"
                class="text-danger">
                Please enter valid JSON data.
              </div>
            </div>
          </div> -->
        </div>
      </form>
    </div>

    <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTab === 'add-widget'}" id="add-widget" role="tabpanel" aria-labelledby="add-widget-tab">

 
      <div class="container">
        <div class="row">
          <div class="col-md-6 centered-dropdown-container">
            <label class="col-form-label fw-bold fs-6">Widget Type</label>
            <ngx-select
              [allowClear]="true"
              name="icon"
              formControlName="tilesList"
              [items]="listofTiles"
              optionValueField="value"
              optionTextField="text"
              placeholder="Select Form"
              (selectionChanges)="tileChange($event)"
            >
            </ngx-select>
          </div>
          
          <!-- Conditionally render grid-item -->
          <div *ngIf="!showGrid" class="grid-item" tabindex="0" 
               style="background: linear-gradient(135deg, #43cea2, #185a9d); padding: 20px; border-radius: 8px; color: white; margin-top: 10px;" (click)="openKPIModal(KPIModal,'')">
               <div>Label</div>
               <div class="value" tabindex="0">Value</div>
          </div>
        </div>
        
    </div>
    <!-- <button (click)="createChartGauge()">click me</button> -->

    <div *ngIf="showGrid && selectedTile !== 'Title'" class="grid-container">
      <div class="grid-item highlight" tabindex="0" (click)="openKPIModal(KPIModal,'')" style="background: linear-gradient(to right, #ff7e5f, #feb47b); padding: 20px; border-radius: 8px; color: white;">
        <div>Label</div>
        <div class="value" tabindex="0">Value</div>
      </div>
      <div class="grid-item" tabindex="0" (click)="openKPIModal1(KPIModal1,'')" style="background: #3498db; padding: 20px; border-radius: 8px; color: white;">
        <div>Label</div>
        <div class="value" tabindex="0">Value</div>
        <div tabindex="0">Label: Value 2</div>
      </div>
      <div class="grid-item" tabindex="0" (click)="openKPIModal2(KPIModal2,'')" style="background: #e74c3c; padding: 20px; border-radius: 8px; color: white;">
        <div>Label</div>
        <div tabindex="0">Label: Value 2</div>
        <div class="value" tabindex="0">Value</div>
        <div>Label: Value 3</div>
      </div>
      <div class="grid-item" tabindex="0" (click)="openKPIModal3(KPIModal3,'')" style="background: #8e44ad; padding: 20px; border-radius: 8px; color: white;">
        <div>Label</div>
        <div class="value" tabindex="0">Value <span class="up-arrow">↑</span></div>
      </div>
      <div class="grid-item" tabindex="0" (click)="openKPIModal4(KPIModal4,'')" style="background: #2ecc71; padding: 20px; border-radius: 8px; color: white;">
        <div>Label</div>
        <div class="value" tabindex="0">Value <span class="up-arrow">↑</span></div>
        <div>Label: Value 2</div>
      </div>
      <div class="grid-item" tabindex="0" (click)="openKPIModal5(KPIModal5,'')" style="background: #2a3439; padding: 20px; border-radius: 8px; color: white;">
        <div>Label</div>
        <div tabindex="0">Label: Value 2</div>
        <div class="value" tabindex="0">Value <span class="up-arrow">↑</span></div>
        <div>Label: Value 3</div>
      </div>
      <!-- <div class="grid-item" tabindex="0" style="background-color: rgb(135, 222, 222);">
        <h1>Coming Soon</h1>
      </div>
      <div class="grid-item" tabindex="0" style="background-color: burlywood;">
        <h1>Coming Soon</h1>
      </div>
      <div class="grid-item" tabindex="0" style="background-color: rgb(222, 135, 176);">
        <h1>Coming Soon</h1>
      </div> -->
    </div>
    
    <div *ngIf="showGrid" class="container" style="margin-top: 10px;">
      <div class="row">
        <!-- Grid item spanning full width -->
        <div class="col-md-12">
          <div 
            *ngIf="showTitleGrid" 
            class="grid-item" 
            tabindex="0" 
         
            style="background: linear-gradient(to right, #6a11cb, #2575fc); padding: 20px; border-radius: 8px; color: white; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); cursor: pointer;"  (click)="openTitleModal(TitleModal)">
            <div tabindex="0" style="margin-top: 10px; font-size: 1.2em; font-weight: bold;">Add Title Here</div>
          </div>
        </div>
      </div>
    </div>



    
    
    


  </div>
  

  
    
    

    <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTab === 'autoflow-config'}" id="autoflow-config" role="tabpanel" aria-labelledby="autoflow-config-tab">
      <form>
        <div class="container">
          <div class="row mb-3">
            <div class="col-12">
              <label class="col-form-label fw-bold fs-6">Autoflow Config</label>
            </div>
          </div>
          <div class="row">

          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal Footer -->
<div class="modal-footer">
  <button type="button" class="btn btn-danger" (click)="modal.dismiss()">Cancel</button>
  
  <!-- Conditionally display the Save button for Add Summary -->
  <button *ngIf="selectedTab === 'add-dashboard' && !showModal" 
  type="button" 
  class="btn btn-primary" 
  [disabled]="createSummaryField.invalid || isDuplicateID || isDuplicateName" 
  (click)="createNewSummary(); modal.dismiss()">
Save
</button>


    
  <!-- Conditionally display the Update button for Edit Summary only when in edit mode -->
  <button *ngIf="selectedTab === 'add-dashboard' && showModal" 
  type="button" 
  class="btn btn-primary" 
  [disabled]="createSummaryField.invalid" 
  (click)="updateSummary(createSummaryField.value, 'editSummary'); modal.dismiss()">
Update
</button>



</div>

</ng-template>





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">

<!-- <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#myModal" style="margin-left: 30px;">
  <span class="svg-icon svg-icon-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <rect opacity="0.5" x="11.364" y="20.364" width="16" height="2" rx="1" transform="rotate(-90 11.364 20.364)"
              fill="black" />
          <rect x="4.36396" y="11.364" width="16" height="2" rx="1" fill="black" />
      </svg>
  </span>
  Location
</button> -->
<!-- </div> -->

<!-- The Modal 1-->
<div class="modal fade" id="myModalLocation" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true"
     data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 450px; width: 100%;">
    <div class="modal-content" style="width: 100%;">
      <div class="modal-header" style="padding-bottom: 15px;">
        <h2 class="modal-title">Location</h2>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <br>
      <div class="container">
        <input type="search" id="search" class="form-control"
               style="margin: 0 auto 1em auto; padding: 4px; border-radius: 4px; border: 1px solid silver;"
               placeholder="Search Locations/Forms..." />
      </div>
      <div class="container scroll-y h-300px" id="SimpleJSTree"></div>
      <div class="modal-footer">
        <div class="container">
          <div class="row">
            <div class="col-md-6">
              <button type="button" class="btn btn-sm btn-primary" [disabled]="!enableLocationButton"
                      data-bs-dismiss="modal" (click)="LocationSummary()">Ok</button>
              &nbsp;
              <button type="button" class="btn btn-sm btn-danger" data-bs-dismiss="modal">Cancel</button>
            </div>
            <!-- Add Location Button -->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>







<ng-template #KPIModal let-modal>
<div class="modal-header">
  <h4 class="modal-title">KPI Widget-1</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
</div>

<!-- Modal body with Tabs -->
<div class="fv-row" [formGroup]="createKPIWidget">
  <div class="modal-body">
    <div class="card-body pt-0">

      <!-- Tab Navigation -->
      <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bolder flex-nowrap" id="myTab_settings" role="tablist">
        <div class="col-6" role="Data">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="home-tab" data-bs-toggle="tab" role="tab" aria-controls="dataTab" aria-selected="false" (click)="selectedSettingsTab('dataTab')">Data</a>
          </li>
        </div>
        <div class="col-6" role="Settings">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="settings-tabpane" data-bs-toggle="tab" role="tab" aria-controls="settings-tab" aria-selected="false" (click)="selectedSettingsTab('settings-tab')">Settings</a>
          </li>
        </div>
      </ul>

      <!-- Tab Content -->
      <div class="tab-content mt-3" id="modalTabsContent">
        <!-- General Tab Content -->
        <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'dataTab'}" id="dataTab" role="tabpanel" aria-labelledby="home-tab">
          <div class="row g-3"> <!-- g-3 adds consistent gap between columns -->
            <!-- Existing fields from your modal go here (form controls, inputs, etc.) -->
            <div class="col-md-4">
              <label for="formlist" class="col-form-label fw-bold fs-6 required">Forms
                <span class="ms-2 text-primary" 
                data-bs-toggle="tooltip" 
                data-bs-placement="top" 
                title="Select form from the list">
            <i class="bi bi-info-circle fs-5"></i>
          </span>
              </label>
              <ngx-select
                id="formlist"
                [allowClear]="true"
                name="icon"
                formControlName="formlist"
                [items]="listofDeviceIds"
                optionValueField="value"
                optionTextField="text"
                (selectionChanges)="selectFormParams($event)"
                placeholder="Select Form">
              </ngx-select>
            </div>
            <div class="col-md-4">
              <label for="parameterName" class="col-form-label fw-bold fs-6 required">Parameter</label>
              <ngx-select
                id="parameterName"
                [allowClear]="true"
                formControlName="parameterName"
                [items]="listofDynamicParam"
                optionValueField="value"
                optionTextField="text"
                placeholder="Select Parameter"
                style="width: 100%;">
              </ngx-select>
            </div>

            <div class="col-md-4">
              <label for="groupBy" class="col-form-label fw-bold fs-6 required">Group By</label>
              <ngx-select
                id="groupBy"
                [allowClear]="true"
                name="icon"
                formControlName="groupBy"
                [items]="groupByOptions"
                optionValueField="value"
                optionTextField="text"
                placeholder="Select Group"
                class="w-100">
              </ngx-select>
            </div>
            <div class="col-md-4">
              <label for="primaryValue" class="col-form-label fw-bold fs-6 required">Primary value

                  <span class="ms-2 text-primary" 
          data-bs-toggle="tooltip" 
          data-bs-placement="top" 
          title="Show Value As">
      <i class="bi bi-info-circle fs-5"></i>
    </span>
              </label>
              <ngx-select
                id="primaryValue"
                [allowClear]="true"
                name="icon"
                formControlName="primaryValue"
                [items]="showValues"
                optionValueField="value"
                optionTextField="text"
                placeholder="Select Group"
                (change)="onValueChange($event)" 
                class="w-100"
                [title]="isEditMode ? 'Edit mode: Show value as' : 'Add mode: Select value to show'"
                data-bs-toggle="tooltip"
                data-bs-placement="top">
              </ngx-select>
            </div>
            <div class="col-md-4" *ngIf="primaryValue?.value === 'Constant'">
              <label for="constant" class="col-form-label fw-bold fs-6 required">Constant</label>
              <input
                id="constant"
                type="number"
                class="form-control form-control-solid"
                placeholder="Select constant"
                formControlName="constantValue"
              />
            </div>
  
            <div class="col-md-4">
              <label for="groupByFormat" class="col-form-label fw-bold fs-6 required">GroupByFormat</label>
              <input
                id="groupByFormat"
                type="text"
                class="form-control form-control-solid"
                placeholder="Select GroupByFormat"
                [formControl]="groupByFormatControl" 
                (click)="openModalCalender()"
                readonly /> <!-- Make it readonly to prevent manual input -->
            </div>
  
            <!-- Input field for ID -->
            <div class="col-md-4" *ngIf="showIdField">
              <label for="id" class="col-form-label fw-bold fs-6 required">ID</label>
              <input
                id="id"
                type="number"
                class="form-control form-control-solid"
                placeholder="Enter ID"
                formControlName="widgetid" 
              />
            </div>

            <div class="col-md-4" >
              <label for="constant" class="col-form-label fw-bold fs-6 required">Processed Value</label>
              <input
                type="text"
                class="form-control form-control-solid"
                placeholder="Select Processed Value"
                formControlName="processed_value"
              />
            </div>

<div class="col-6">
<label for="rangeCalendarTimeRight" class="col-form-label fw-bold fs-6">Pre Defined Date Range</label>
<input
type="text"
id="rangeCalendarCenter"
class="form-control"
style="box-shadow: none; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;"
readonly
ngxDaterangepickerBootstrap
formControlName="predefinedSelectRange" 
[drops]="dropsDown"
[opens]="opensCenter"
[locale]="locale"
[ranges]="ranges"
[showCustomRangeLabel]="true"
[showCancel]="true"
[linkedCalendars]="true"
[alwaysShowCalendars]="false"
[showRangeLabelOnInput]="false"
[keepCalendarOpeningWithRange]="false"
[isTooltipDate]="isTooltipDate"
[isCustomDate]="isCustomDate"
[isInvalidDate]="isInvalidDate"
(datesUpdated)="datesUpdatedRange($event)" 
aria-describedby="rangeCalendarCenterDesc"
/>






<div id="rangeCalendarTimeRightDesc" class="form-text">
</div>
</div>
<div class="col-md-4">
<label for="groupByFormat" class="col-form-label fw-bold fs-6 required">DateRange Label</label>
<input
 
  type="text"
  class="form-control form-control-solid"
  placeholder="Select GroupByFormat"
  formControlName="selectedRangeType"

  readonly /> <!-- Make it readonly to prevent manual input -->
</div>


            

            <!-- More form fields... -->
          </div>
        </div>

        <!-- Settings Tab Content -->
        <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'settings-tab'}" id="settings-tab" role="tabpanel" aria-labelledby="settings-tabpane">
<!-- Themes Section -->
<div class="row g-3">
<div class="col-md-6">
<label class="col-form-label fw-bold fs-6 required" >Themes:</label>
<div class="color-boxes">
  <div
  *ngFor="let theme of themes"
  class="color-box"
  [ngStyle]="{ 'background-color': theme.color }"
  (click)="toggleCheckbox(theme)"  
  [class.checked]="theme.selected"
>
  <div *ngIf="theme.selected" class="checkmark">✔</div>
</div>

</div>
</div>

<!-- Custom Color Picker Section -->
<div class="col-md-6">
<label class="col-form-label fw-bold fs-6">Custom:</label>
<div class="d-flex align-items-center">
  <input
  type="color"
  id="customColor"
  class="form-control form-control-solid"
  style="width: 40px; height: 40px;"
  [value]="selectedColor"
  formControlName="themeColor"
  (input)="onColorChange1($event)"
/>
  <!-- <span class="fs-6 ms-2">A</span> -->
</div>
</div>
</div>

          
          
          
          
          
          
          
          
          
          
          
        </div>
      </div>

    </div>

    <div class="modal-footer" style="margin-top: 20px;">
      <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
<button type="button" class="btn btn-primary" 
(click)="addTile('tile'); modal.dismiss()" 
*ngIf="!isEditMode" 

[disabled]="createKPIWidget.invalid">Save</button>
<button 
    type="button" 
    class="btn btn-warning" 
    (click)="updateTile(); modal.dismiss()" 
    *ngIf="isEditMode" 
    [disabled]="createKPIWidget.invalid">
    Update
  </button>
    </div>
  </div>
</div>
</ng-template>







<style>
.container1 {
    max-width: 600px;
    margin: 20px auto;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-family: Arial, sans-serif;
    background-color: #f8f9fa;
}

.list-row {
    display: flex;
    justify-content: space-between;
    gap: 20px;
}

.list-column {
    width: 48%;
}

.list-item {
    padding: 8px;
    border-radius: 4px;
    margin-bottom: 10px;
    cursor: pointer;
}

.list-item:hover, .list-item.active {
    background-color: #e7f1ff;
    color: #004085;
}

.title {
    font-weight: bold;
}

.example {
 
    font-size: 14px;
}
</style>


<ng-template #calendarModal let-modal>
<div class="modal-header">
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
</div>
<div class="modal-body right-side-modal">
  <div class="card-body pt-0">
    <div class="container1">
      <div class="list-row">
        <div class="list-column">
          <div class="list-item active" (click)="selectValue('Year', modal)" (mouseenter)="showTooltip('Year')" (mouseleave)="hideTooltip()">
            <div class="title">Year</div>
            <div class="example">E.g., 2003, 2004</div>
          </div>
          <div class="list-item" (click)="selectValue('QuarterYear', modal)" (mouseenter)="showTooltip('QuarterYear')" (mouseleave)="hideTooltip()">
            <div class="title">Quarter & Year</div>
            <div class="example">E.g., Q1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue('MonthYear', modal)" (mouseenter)="showTooltip('MonthYear')" (mouseleave)="hideTooltip()">
            <div class="title">Month & Year</div>
            <div class="example">E.g., March 2004</div>
          </div>
          <div class="list-item" (click)="selectValue('WeekYear', modal)" (mouseenter)="showTooltip('WeekYear')" (mouseleave)="hideTooltip()">
            <div class="title">Week & Year</div>
            <div class="example">E.g., W1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue('FullDate', modal)" (mouseenter)="showTooltip('FullDate')" (mouseleave)="hideTooltip()">
            <div class="title">Full Date</div>
            <div class="example">E.g., 1/1/2000</div>
          </div>
          <div class="list-item" (click)="selectValue('DateTime', modal)" (mouseenter)="showTooltip('DateTime')" (mouseleave)="hideTooltip()">
            <div class="title">Date & Time</div>
            <div class="example">E.g., 01 Jan, 2000 00:00:07 hrs</div>
          </div>
        </div>
        <div class="list-column">
          <div class="list-item" (click)="selectValue('Quarter', modal)">
            <div class="title">Quarter</div>
            <div class="example">E.g., Q1, Q2</div>
          </div>
          <div class="list-item" (click)="selectValue('Month', modal)">
            <div class="title">Month</div>
            <div class="example">E.g., January, February</div>
          </div>
          <div class="list-item" (click)="selectValue('Week', modal)">
            <div class="title">Week</div>
            <div class="example">E.g., Week 1, Week 2</div>
          </div>
          <div class="list-item" (click)="selectValue('WeekDay', modal)">
            <div class="title">Week Day</div>
            <div class="example">E.g., Sunday, Monday</div>
          </div>
          <div class="list-item" (click)="selectValue('DayOfMonth', modal)">
            <div class="title">Day of Month</div>
            <div class="example">E.g., 1 to 31</div>
          </div>
          <div class="list-item" (click)="selectValue('HourOfDay', modal)">
            <div class="title">Hour of Day</div>
            <div class="example">E.g., 0 to 23 hrs</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</ng-template>

<ng-template #calendarModal1 let-modal>
<div class="modal-header">
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
</div>
<div class="modal-body right-side-modal">
  <div class="card-body pt-0">
    <div class="container1">
      <div class="list-row">
        <div class="list-column">
          <div class="list-item active" (click)="selectValue1('Year', modal)" (mouseenter)="showTooltip('Year')" (mouseleave)="hideTooltip()">
            <div class="title">Year</div>
            <div class="example">E.g., 2003, 2004</div>
          </div>
          <div class="list-item" (click)="selectValue1('QuarterYear', modal)" (mouseenter)="showTooltip('QuarterYear')" (mouseleave)="hideTooltip()">
            <div class="title">Quarter & Year</div>
            <div class="example">E.g., Q1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue1('MonthYear', modal)" (mouseenter)="showTooltip('MonthYear')" (mouseleave)="hideTooltip()">
            <div class="title">Month & Year</div>
            <div class="example">E.g., March 2004</div>
          </div>
          <div class="list-item" (click)="selectValue1('WeekYear', modal)" (mouseenter)="showTooltip('WeekYear')" (mouseleave)="hideTooltip()">
            <div class="title">Week & Year</div>
            <div class="example">E.g., W1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue1('FullDate', modal)" (mouseenter)="showTooltip('FullDate')" (mouseleave)="hideTooltip()">
            <div class="title">Full Date</div>
            <div class="example">E.g., 1/1/2000</div>
          </div>
          <div class="list-item" (click)="selectValue1('DateTime', modal)" (mouseenter)="showTooltip('DateTime')" (mouseleave)="hideTooltip()">
            <div class="title">Date & Time</div>
            <div class="example">E.g., 01 Jan, 2000 00:00:07 hrs</div>
          </div>
        </div>
        <div class="list-column">
          <div class="list-item" (click)="selectValue1('Quarter', modal)">
            <div class="title">Quarter</div>
            <div class="example">E.g., Q1, Q2</div>
          </div>
          <div class="list-item" (click)="selectValue1('Month', modal)">
            <div class="title">Month</div>
            <div class="example">E.g., January, February</div>
          </div>
          <div class="list-item" (click)="selectValue1('Week', modal)">
            <div class="title">Week</div>
            <div class="example">E.g., Week 1, Week 2</div>
          </div>
          <div class="list-item" (click)="selectValue1('WeekDay', modal)">
            <div class="title">Week Day</div>
            <div class="example">E.g., Sunday, Monday</div>
          </div>
          <div class="list-item" (click)="selectValue1('DayOfMonth', modal)">
            <div class="title">Day of Month</div>
            <div class="example">E.g., 1 to 31</div>
          </div>
          <div class="list-item" (click)="selectValue1('HourOfDay', modal)">
            <div class="title">Hour of Day</div>
            <div class="example">E.g., 0 to 23 hrs</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</ng-template>
<ng-template #calendarModal2 let-modal>
<div class="modal-header">
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
</div>
<div class="modal-body right-side-modal">
  <div class="card-body pt-0">
    <div class="container1">
      <div class="list-row">
        <div class="list-column">
          <div class="list-item active" (click)="selectValue2('Year', modal)" (mouseenter)="showTooltip('Year')" (mouseleave)="hideTooltip()">
            <div class="title">Year</div>
            <div class="example">E.g., 2003, 2004</div>
          </div>
          <div class="list-item" (click)="selectValue2('QuarterYear', modal)" (mouseenter)="showTooltip('QuarterYear')" (mouseleave)="hideTooltip()">
            <div class="title">Quarter & Year</div>
            <div class="example">E.g., Q1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue2('MonthYear', modal)" (mouseenter)="showTooltip('MonthYear')" (mouseleave)="hideTooltip()">
            <div class="title">Month & Year</div>
            <div class="example">E.g., March 2004</div>
          </div>
          <div class="list-item" (click)="selectValue2('WeekYear', modal)" (mouseenter)="showTooltip('WeekYear')" (mouseleave)="hideTooltip()">
            <div class="title">Week & Year</div>
            <div class="example">E.g., W1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue2('FullDate', modal)" (mouseenter)="showTooltip('FullDate')" (mouseleave)="hideTooltip()">
            <div class="title">Full Date</div>
            <div class="example">E.g., 1/1/2000</div>
          </div>
          <div class="list-item" (click)="selectValue2('DateTime', modal)" (mouseenter)="showTooltip('DateTime')" (mouseleave)="hideTooltip()">
            <div class="title">Date & Time</div>
            <div class="example">E.g., 01 Jan, 2000 00:00:07 hrs</div>
          </div>
        </div>
        <div class="list-column">
          <div class="list-item" (click)="selectValue2('Quarter', modal)">
            <div class="title">Quarter</div>
            <div class="example">E.g., Q1, Q2</div>
          </div>
          <div class="list-item" (click)="selectValue2('Month', modal)">
            <div class="title">Month</div>
            <div class="example">E.g., January, February</div>
          </div>
          <div class="list-item" (click)="selectValue2('Week', modal)">
            <div class="title">Week</div>
            <div class="example">E.g., Week 1, Week 2</div>
          </div>
          <div class="list-item" (click)="selectValue2('WeekDay', modal)">
            <div class="title">Week Day</div>
            <div class="example">E.g., Sunday, Monday</div>
          </div>
          <div class="list-item" (click)="selectValue2('DayOfMonth', modal)">
            <div class="title">Day of Month</div>
            <div class="example">E.g., 1 to 31</div>
          </div>
          <div class="list-item" (click)="selectValue2('HourOfDay', modal)">
            <div class="title">Hour of Day</div>
            <div class="example">E.g., 0 to 23 hrs</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</ng-template>
<ng-template #calendarModal3 let-modal>
<div class="modal-header">
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
</div>
<div class="modal-body right-side-modal">
  <div class="card-body pt-0">
    <div class="container1">
      <div class="list-row">
        <div class="list-column">
          <div class="list-item active" (click)="selectValue3('Year', modal)" (mouseenter)="showTooltip('Year')" (mouseleave)="hideTooltip()">
            <div class="title">Year</div>
            <div class="example">E.g., 2003, 2004</div>
          </div>
          <div class="list-item" (click)="selectValue3('QuarterYear', modal)" (mouseenter)="showTooltip('QuarterYear')" (mouseleave)="hideTooltip()">
            <div class="title">Quarter & Year</div>
            <div class="example">E.g., Q1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue3('MonthYear', modal)" (mouseenter)="showTooltip('MonthYear')" (mouseleave)="hideTooltip()">
            <div class="title">Month & Year</div>
            <div class="example">E.g., March 2004</div>
          </div>
          <div class="list-item" (click)="selectValue3('WeekYear', modal)" (mouseenter)="showTooltip('WeekYear')" (mouseleave)="hideTooltip()">
            <div class="title">Week & Year</div>
            <div class="example">E.g., W1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue3('FullDate', modal)" (mouseenter)="showTooltip('FullDate')" (mouseleave)="hideTooltip()">
            <div class="title">Full Date</div>
            <div class="example">E.g., 1/1/2000</div>
          </div>
          <div class="list-item" (click)="selectValue3('DateTime', modal)" (mouseenter)="showTooltip('DateTime')" (mouseleave)="hideTooltip()">
            <div class="title">Date & Time</div>
            <div class="example">E.g., 01 Jan, 2000 00:00:07 hrs</div>
          </div>
        </div>
        <div class="list-column">
          <div class="list-item" (click)="selectValue3('Quarter', modal)">
            <div class="title">Quarter</div>
            <div class="example">E.g., Q1, Q2</div>
          </div>
          <div class="list-item" (click)="selectValue3('Month', modal)">
            <div class="title">Month</div>
            <div class="example">E.g., January, February</div>
          </div>
          <div class="list-item" (click)="selectValue3('Week', modal)">
            <div class="title">Week</div>
            <div class="example">E.g., Week 1, Week 2</div>
          </div>
          <div class="list-item" (click)="selectValue3('WeekDay', modal)">
            <div class="title">Week Day</div>
            <div class="example">E.g., Sunday, Monday</div>
          </div>
          <div class="list-item" (click)="selectValue3('DayOfMonth', modal)">
            <div class="title">Day of Month</div>
            <div class="example">E.g., 1 to 31</div>
          </div>
          <div class="list-item" (click)="selectValue3('HourOfDay', modal)">
            <div class="title">Hour of Day</div>
            <div class="example">E.g., 0 to 23 hrs</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</ng-template>

<ng-template #calendarModal4 let-modal>
<div class="modal-header">
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
</div>
<div class="modal-body right-side-modal">
  <div class="card-body pt-0">
    <div class="container1">
      <div class="list-row">
        <div class="list-column">
          <div class="list-item active" (click)="selectValue4('Year', modal)" (mouseenter)="showTooltip('Year')" (mouseleave)="hideTooltip()">
            <div class="title">Year</div>
            <div class="example">E.g., 2003, 2004</div>
          </div>
          <div class="list-item" (click)="selectValue4('QuarterYear', modal)" (mouseenter)="showTooltip('QuarterYear')" (mouseleave)="hideTooltip()">
            <div class="title">Quarter & Year</div>
            <div class="example">E.g., Q1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue4('MonthYear', modal)" (mouseenter)="showTooltip('MonthYear')" (mouseleave)="hideTooltip()">
            <div class="title">Month & Year</div>
            <div class="example">E.g., March 2004</div>
          </div>
          <div class="list-item" (click)="selectValue4('WeekYear', modal)" (mouseenter)="showTooltip('WeekYear')" (mouseleave)="hideTooltip()">
            <div class="title">Week & Year</div>
            <div class="example">E.g., W1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue4('FullDate', modal)" (mouseenter)="showTooltip('FullDate')" (mouseleave)="hideTooltip()">
            <div class="title">Full Date</div>
            <div class="example">E.g., 1/1/2000</div>
          </div>
          <div class="list-item" (click)="selectValue4('DateTime', modal)" (mouseenter)="showTooltip('DateTime')" (mouseleave)="hideTooltip()">
            <div class="title">Date & Time</div>
            <div class="example">E.g., 01 Jan, 2000 00:00:07 hrs</div>
          </div>
        </div>
        <div class="list-column">
          <div class="list-item" (click)="selectValue4('Quarter', modal)">
            <div class="title">Quarter</div>
            <div class="example">E.g., Q1, Q2</div>
          </div>
          <div class="list-item" (click)="selectValue4('Month', modal)">
            <div class="title">Month</div>
            <div class="example">E.g., January, February</div>
          </div>
          <div class="list-item" (click)="selectValue4('Week', modal)">
            <div class="title">Week</div>
            <div class="example">E.g., Week 1, Week 2</div>
          </div>
          <div class="list-item" (click)="selectValue4('WeekDay', modal)">
            <div class="title">Week Day</div>
            <div class="example">E.g., Sunday, Monday</div>
          </div>
          <div class="list-item" (click)="selectValue4('DayOfMonth', modal)">
            <div class="title">Day of Month</div>
            <div class="example">E.g., 1 to 31</div>
          </div>
          <div class="list-item" (click)="selectValue4('HourOfDay', modal)">
            <div class="title">Hour of Day</div>
            <div class="example">E.g., 0 to 23 hrs</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</ng-template>
<ng-template #calendarModal5 let-modal>
<div class="modal-header">
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
</div>
<div class="modal-body right-side-modal">
  <div class="card-body pt-0">
    <div class="container1">
      <div class="list-row">
        <div class="list-column">
          <div class="list-item active" (click)="selectValue5('Year', modal)" (mouseenter)="showTooltip('Year')" (mouseleave)="hideTooltip()">
            <div class="title">Year</div>
            <div class="example">E.g., 2003, 2004</div>
          </div>
          <div class="list-item" (click)="selectValue5('QuarterYear', modal)" (mouseenter)="showTooltip('QuarterYear')" (mouseleave)="hideTooltip()">
            <div class="title">Quarter & Year</div>
            <div class="example">E.g., Q1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue5('MonthYear', modal)" (mouseenter)="showTooltip('MonthYear')" (mouseleave)="hideTooltip()">
            <div class="title">Month & Year</div>
            <div class="example">E.g., March 2004</div>
          </div>
          <div class="list-item" (click)="selectValue5('WeekYear', modal)" (mouseenter)="showTooltip('WeekYear')" (mouseleave)="hideTooltip()">
            <div class="title">Week & Year</div>
            <div class="example">E.g., W1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue5('FullDate', modal)" (mouseenter)="showTooltip('FullDate')" (mouseleave)="hideTooltip()">
            <div class="title">Full Date</div>
            <div class="example">E.g., 1/1/2000</div>
          </div>
          <div class="list-item" (click)="selectValue5('DateTime', modal)" (mouseenter)="showTooltip('DateTime')" (mouseleave)="hideTooltip()">
            <div class="title">Date & Time</div>
            <div class="example">E.g., 01 Jan, 2000 00:00:07 hrs</div>
          </div>
        </div>
        <div class="list-column">
          <div class="list-item" (click)="selectValue5('Quarter', modal)">
            <div class="title">Quarter</div>
            <div class="example">E.g., Q1, Q2</div>
          </div>
          <div class="list-item" (click)="selectValue5('Month', modal)">
            <div class="title">Month</div>
            <div class="example">E.g., January, February</div>
          </div>
          <div class="list-item" (click)="selectValue5('Week', modal)">
            <div class="title">Week</div>
            <div class="example">E.g., Week 1, Week 2</div>
          </div>
          <div class="list-item" (click)="selectValue5('WeekDay', modal)">
            <div class="title">Week Day</div>
            <div class="example">E.g., Sunday, Monday</div>
          </div>
          <div class="list-item" (click)="selectValue5('DayOfMonth', modal)">
            <div class="title">Day of Month</div>
            <div class="example">E.g., 1 to 31</div>
          </div>
          <div class="list-item" (click)="selectValue5('HourOfDay', modal)">
            <div class="title">Hour of Day</div>
            <div class="example">E.g., 0 to 23 hrs</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</ng-template>
<ng-template #calendarModal6 let-modal>
<div class="modal-header">
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
</div>
<div class="modal-body right-side-modal">
  <div class="card-body pt-0">
    <div class="container1">
      <div class="list-row">
        <div class="list-column">
          <div class="list-item active" (click)="selectValue6('Year', modal)" (mouseenter)="showTooltip('Year')" (mouseleave)="hideTooltip()">
            <div class="title">Year</div>
            <div class="example">E.g., 2003, 2004</div>
          </div>
          <div class="list-item" (click)="selectValue6('QuarterYear', modal)" (mouseenter)="showTooltip('QuarterYear')" (mouseleave)="hideTooltip()">
            <div class="title">Quarter & Year</div>
            <div class="example">E.g., Q1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue6('MonthYear', modal)" (mouseenter)="showTooltip('MonthYear')" (mouseleave)="hideTooltip()">
            <div class="title">Month & Year</div>
            <div class="example">E.g., March 2004</div>
          </div>
          <div class="list-item" (click)="selectValue6('WeekYear', modal)" (mouseenter)="showTooltip('WeekYear')" (mouseleave)="hideTooltip()">
            <div class="title">Week & Year</div>
            <div class="example">E.g., W1 2004</div>
          </div>
          <div class="list-item" (click)="selectValue6('FullDate', modal)" (mouseenter)="showTooltip('FullDate')" (mouseleave)="hideTooltip()">
            <div class="title">Full Date</div>
            <div class="example">E.g., 1/1/2000</div>
          </div>
          <div class="list-item" (click)="selectValue6('DateTime', modal)" (mouseenter)="showTooltip('DateTime')" (mouseleave)="hideTooltip()">
            <div class="title">Date & Time</div>
            <div class="example">E.g., 01 Jan, 2000 00:00:07 hrs</div>
          </div>
        </div>
        <div class="list-column">
          <div class="list-item" (click)="selectValue6('Quarter', modal)">
            <div class="title">Quarter</div>
            <div class="example">E.g., Q1, Q2</div>
          </div>
          <div class="list-item" (click)="selectValue6('Month', modal)">
            <div class="title">Month</div>
            <div class="example">E.g., January, February</div>
          </div>
          <div class="list-item" (click)="selectValue6('Week', modal)">
            <div class="title">Week</div>
            <div class="example">E.g., Week 1, Week 2</div>
          </div>
          <div class="list-item" (click)="selectValue6('WeekDay', modal)">
            <div class="title">Week Day</div>
            <div class="example">E.g., Sunday, Monday</div>
          </div>
          <div class="list-item" (click)="selectValue6('DayOfMonth', modal)">
            <div class="title">Day of Month</div>
            <div class="example">E.g., 1 to 31</div>
          </div>
          <div class="list-item" (click)="selectValue6('HourOfDay', modal)">
            <div class="title">Hour of Day</div>
            <div class="example">E.g., 0 to 23 hrs</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</ng-template>


<ng-template #KPIModal1 let-modal>
<div class="modal-header">
  <h4 class="modal-title">KPI Widget-2</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
</div>
<div class="fv-row" [formGroup]="createKPIWidget1">
  <div class="modal-body">
    <div class="card-body pt-0">
      <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bolder flex-nowrap" id="myTab_settings1" role="tablist">
        <div class="col-6" role="Data">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="home-tab" data-bs-toggle="tab" role="tab" aria-controls="dataTab" aria-selected="false" (click)="selectedSettingsTab('dataTab')">Data</a>
          </li>
        </div>
        <div class="col-6" role="Settings">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="settings-tabpane" data-bs-toggle="tab" role="tab" aria-controls="settings-tab" aria-selected="false" (click)="selectedSettingsTab('settings-tab')">Settings</a>
          </li>
        </div>
      </ul>
      <div class="tab-content mt-3" id="modalTabsContent">
        <!-- General Tab Content -->
        <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'dataTab'}" id="dataTab" role="tabpanel" aria-labelledby="home-tab">
      <div class="row g-3"> <!-- g-3 adds consistent gap between columns -->
        <div class="col-md-4"> <!-- Column for the first dropdown -->
          <label class="col-form-label fw-bold fs-6">Forms</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="formlist"
            [items]="listofDeviceIds"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Form"
            (selectionChanges)="selectFormParams($event)"
        > <!-- Ensures dropdown takes full width of column -->
          </ngx-select>
        </div>
        <div class="col-md-4">
          <label for="parameterName" class="col-form-label fw-bold fs-6">Parameter</label>
          <ngx-select
            id="parameterName"
            [allowClear]="true"
            formControlName="parameterName"
            [items]="listofDynamicParam"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Parameter"
            style="width: 100%;">
          </ngx-select>
        </div>
  
        <div class="col-md-4"> <!-- Column for the second dropdown -->
          <label class="col-form-label fw-bold fs-6 required">Group By</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="groupBy"
            [items]="groupByOptions"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Group"
     
            class="w-100"> <!-- Ensures dropdown takes full width of column -->
          </ngx-select>
        </div>
        <div class="fv-row">
          <div class="row">
              <div class="col-md-4"> <!-- Column for the first dropdown -->
                  <label class="col-form-label fw-bold fs-6 required">Primary Value
                    <span class="ms-2 text-primary" 
                    data-bs-toggle="tooltip" 
                    data-bs-placement="top" 
                    title="Show Value As">
                <i class="bi bi-info-circle fs-5"></i>
              </span>
                  </label>
                  <ngx-select
                      [allowClear]="true"
                      name="primary-icon"
                      formControlName="primaryValue"
                      [items]="showValues"
                      optionValueField="value"
                      optionTextField="text"
                      placeholder="Select Group"
                      class="w-100"> <!-- Ensures dropdown takes full width of column -->
                  </ngx-select>
              </div>

              <div class="col-md-4" *ngIf="primaryValue1?.value === 'Constant'">
                <label for="constant1" class="col-form-label fw-bold fs-6 required">Constant</label>
                <input
                  id="constant1"
                  type="number"
                  class="form-control form-control-solid"
                  placeholder="Select constant"
                  formControlName="constantValue"
                  (change)="onValueChange1($event)" 
                />
              </div>
              <div class="col-md-4"> <!-- Column for the second dropdown -->
                  <label class="col-form-label fw-bold fs-6 required">Secondary Value
                    <span class="ms-2 text-primary" 
                    data-bs-toggle="tooltip" 
                    data-bs-placement="top" 
                    title="Show Value As">
                <i class="bi bi-info-circle fs-5"></i>
              </span>
                  </label>
                  <ngx-select
                      [allowClear]="true"
                      name="secondary-icon"
                      formControlName="secondaryValue"
                      [items]="showValues"
                      optionValueField="value"
                      optionTextField="text"
                      placeholder="Select Group"
                      class="w-100"> <!-- Ensures dropdown takes full width of column -->
                  </ngx-select>
              </div>


    
    
              <div class="col-md-4">
                <label for="groupByFormat" class="col-form-label fw-bold fs-6 required">GroupByFormat</label>
                <input
                  id="groupByFormat"
                  type="text"
                  class="form-control form-control-solid"
                  placeholder="Select GroupByFormat"
                  [formControl]="groupByFormatControl1" 
                  (click)="openModalCalender1()"
                  readonly /> <!-- Make it readonly to prevent manual input -->
              
    
              </div>


              <div class="col-md-4" *ngIf="showIdField">
                <label for="id" class="col-form-label fw-bold fs-6 required">ID</label>
                <input
                  id="id"
                  type="number"
                  class="form-control form-control-solid"
                  placeholder="Enter ID"
                  formControlName="widgetid" 
                />
              </div>



              <div class="col-md-4" >
                <label for="constant" class="col-form-label fw-bold fs-6 required">Processed Value</label>
                <input
                  type="text"
                  class="form-control form-control-solid"
                  placeholder="Select Processed Value"
                  formControlName="processed_value"
                />
              </div>
          </div>
      </div>
      
      </div>
        </div>

        <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'settings-tab'}" id="settings-tab" role="tabpanel" aria-labelledby="settings-tabpane">
          <!-- Themes Section -->
<div class="row g-3">
<div class="col-md-6">
  <label class="col-form-label fw-bold fs-6 required">Themes:</label>
  <div class="color-boxes">
    <div
      *ngFor="let theme of themes"
      class="color-box"
      [ngStyle]="{ 'background-color': theme.color }"
      (click)="toggleCheckbox1(theme)"
      [class.checked]="theme.selected"
    >
      <div *ngIf="theme.selected" class="checkmark">✔</div>
    </div>
  </div>
</div>


<!-- Custom Color Picker Section -->
<div class="col-md-6">
  <label class="col-form-label fw-bold fs-6">Custom:</label>
  <div class="d-flex align-items-center">
    <input
      type="color"
      id="customColor"
      class="form-control form-control-solid"
      style="width: 40px; height: 40px;"
  formControlName="themeColor"
  (input)="onColorChange($event)" 
  
    />
  </div>
</div>
</div>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                    </div>
      </div>

    </div>
  </div>
  

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
  <button type="button" class="btn btn-primary" (click)="addTile('tile2'); modal.dismiss()" [disabled]="createKPIWidget1.invalid" *ngIf="!isEditMode">Save</button> <!-- Save button shown only in add mode -->
  <button type="button" class="btn btn-warning" (click)="updateTile1(); modal.dismiss()" *ngIf="isEditMode">Update</button> <!-- Update button shown only in edit mode -->
</div>
</div>
</ng-template>



<ng-template #KPIModal2 let-modal>
<div class="modal-header">
  <h4 class="modal-title">KPI Widget-3</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
</div>
<div class="fv-row" [formGroup]="createKPIWidget2">
  <div class="modal-body">
    <div class="card-body pt-0">

      <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bolder flex-nowrap" id="myTab_settings1" role="tablist">
        <div class="col-6" role="Data">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="home-tab" data-bs-toggle="tab" role="tab" aria-controls="dataTab" aria-selected="false" (click)="selectedSettingsTab('dataTab')">Data</a>
          </li>
        </div>
        <div class="col-6" role="Settings">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="settings-tabpane" data-bs-toggle="tab" role="tab" aria-controls="settings-tab" aria-selected="false" (click)="selectedSettingsTab('settings-tab')">Settings</a>
          </li>
        </div>
      </ul>
      <div class="tab-content mt-3" id="modalTabsContent">
        <!-- General Tab Content -->
        <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'dataTab'}" id="dataTab" role="tabpanel" aria-labelledby="home-tab">
      <div class="row g-3"> <!-- g-3 adds consistent gap between columns -->
        <div class="col-md-4"> <!-- Column for the first dropdown -->
          <label class="col-form-label fw-bold fs-6">Forms</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="formlist"
            [items]="listofDeviceIds"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Form"
            (selectionChanges)="selectFormParams($event)"
        > <!-- Ensures dropdown takes full width of column -->
          </ngx-select>
        </div>
        <div class="col-md-4">
          <label for="parameterName" class="col-form-label fw-bold fs-6">Parameter</label>
          <ngx-select
            id="parameterName"
            [allowClear]="true"
            formControlName="parameterName"
            [items]="listofDynamicParam"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Parameter"
            style="width: 100%;">
          </ngx-select>
        </div>
  
        <div class="col-md-4"> <!-- Column for the second dropdown -->
          <label class="col-form-label fw-bold fs-6 required">Group By</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="groupBy"
            [items]="groupByOptions"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Group"
     
            class="w-100"> <!-- Ensures dropdown takes full width of column -->
          </ngx-select>
        </div>
        <div class="fv-row">
          <div class="row">
              <div class="col-md-4"> <!-- Column for the first dropdown -->
                  <label class="col-form-label fw-bold fs-6 required">Primary Value
                    <span class="ms-2 text-primary" 
                    data-bs-toggle="tooltip" 
                    data-bs-placement="top" 
                    title="Show Value As">
                <i class="bi bi-info-circle fs-5"></i>
              </span>
                  </label>
                  <ngx-select
                      [allowClear]="true"
                      name="primary-icon"
                      formControlName="primaryValue"
                      [items]="showValues"
                      optionValueField="value"
                      optionTextField="text"
                      placeholder="Select Group"
                      class="w-100"> <!-- Ensures dropdown takes full width of column -->
                  </ngx-select>
              </div>

              <div class="col-md-4" *ngIf="primaryValue2?.value === 'Constant'">
                <label for="constant12" class="col-form-label fw-bold fs-6 required">Constant</label>
                <input
                  id="constant2"
                  type="number"
                  class="form-control form-control-solid"
                  placeholder="Select constant"
                  formControlName="constantValue"
                  (change)="onValueChange2($event)" 
                />
              </div>
              <div class="col-md-4"> <!-- Column for the second dropdown -->
                  <label class="col-form-label fw-bold fs-6 required">Secondary Value
                    <span class="ms-2 text-primary" 
                    data-bs-toggle="tooltip" 
                    data-bs-placement="top" 
                    title="Show Value As">
                <i class="bi bi-info-circle fs-5"></i>
              </span>
                  </label>
                  <ngx-select
                      [allowClear]="true"
                      name="secondary-icon"
                      formControlName="secondaryValue"
                      [items]="showValues"
                      optionValueField="value"
                      optionTextField="text"
                      placeholder="Select Secondary Value"
                      class="w-100"> <!-- Ensures dropdown takes full width of column -->
                  </ngx-select>
              </div>

              <div class="col-md-4"> <!-- Column for the second dropdown -->
                <label class="col-form-label fw-bold fs-6 required">Tertiary Value
                  <span class="ms-2 text-primary" 
                  data-bs-toggle="tooltip" 
                  data-bs-placement="top" 
                  title="Show Value As">
              <i class="bi bi-info-circle fs-5"></i>
            </span>
                </label>
                <ngx-select
                    [allowClear]="true"
                    name="secondary-icon"
                    formControlName="secondaryValueNested"
                    [items]="showValues"
                    optionValueField="value"
                    optionTextField="text"
                    placeholder="Select Tertiary Value"
                    class="w-100"> <!-- Ensures dropdown takes full width of column -->
                </ngx-select>
            </div>



    
    
              <div class="col-md-4">
                <label for="groupByFormat" class="col-form-label fw-bold fs-6 required">GroupByFormat</label>
                <input
                  id="groupByFormat"
                  type="text"
                  class="form-control form-control-solid"
                  placeholder="Select GroupByFormat"
                  [formControl]="groupByFormatControl2" 
                  (click)="openModalCalender2()"
                  readonly /> <!-- Make it readonly to prevent manual input -->
              
    
              </div>


              <div class="col-md-4" *ngIf="showIdField">
                <label for="id" class="col-form-label fw-bold fs-6 required">ID</label>
                <input
                  id="id"
                  type="number"
                  class="form-control form-control-solid"
                  placeholder="Enter ID"
                  formControlName="widgetid" 
                />
              </div>

              <div class="col-md-4" >
                <label for="constant" class="col-form-label fw-bold fs-6 required">Processed Value</label>
                <input
                  type="text"
                  class="form-control form-control-solid"
                  placeholder="Select Processed Value"
                  formControlName="processed_value"
                />
              </div>
          </div>
      </div>
      
      </div>
        </div>

        <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'settings-tab'}" id="settings-tab" role="tabpanel" aria-labelledby="settings-tabpane">
          <!-- Themes Section -->
          <div class="row g-3">
          <div class="col-md-6">
            <label class="col-form-label fw-bold fs-6 required">Themes:</label>
            <div class="color-boxes">
              <div
              *ngFor="let theme of themes"
              class="color-box"
              [ngStyle]="{ 'background-color': theme.color }"
              (click)="toggleCheckbox2(theme)"  
              [class.checked]="theme.selected"
            >
              <div *ngIf="theme.selected" class="checkmark">✔</div>
            </div>
            
            </div>
          </div>
          
          <!-- Custom Color Picker Section -->
          <div class="col-md-6">
            <label class="col-form-label fw-bold fs-6">Custom:</label>
            <div class="d-flex align-items-center">
              <input
              type="color"
              id="customColor"
              class="form-control form-control-solid"
              style="width: 40px; height: 40px;"
              [value]="selectedColor"
              formControlName="themeColor"
              (input)="onColorChange2($event)"
            />
              <!-- <span class="fs-6 ms-2">A</span> -->
            </div>
          </div>
          </div>
          
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                    </div>
      </div>
    </div>
  </div>
  

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
  <button type="button" class="btn btn-primary" (click)="addTile('tile3'); modal.dismiss()" [disabled]="createKPIWidget2.invalid" *ngIf="!isEditMode">Save</button> <!-- Save button shown only in add mode -->
  <button type="button" class="btn btn-warning" (click)="updateTile2(); modal.dismiss()" *ngIf="isEditMode">Update</button> <!-- Update button shown only in edit mode -->
</div>
</div>
</ng-template>

<ng-template #KPIModal3 let-modal>
<div class="modal-header">
  <h4 class="modal-title">KPI Widget-4</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
</div>
<div class="fv-row" [formGroup]="createKPIWidget3">
  <div class="modal-body">
    <div class="card-body pt-0">
      <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bolder flex-nowrap" id="myTab_settings1" role="tablist">
        <div class="col-6" role="Data">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="home-tab" data-bs-toggle="tab" role="tab" aria-controls="dataTab" aria-selected="false" (click)="selectedSettingsTab('dataTab')">Data</a>
          </li>
        </div>
        <div class="col-6" role="Settings">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="settings-tabpane" data-bs-toggle="tab" role="tab" aria-controls="settings-tab" aria-selected="false" (click)="selectedSettingsTab('settings-tab')">Settings</a>
          </li>
        </div>
      </ul>
      <div class="tab-content mt-3" id="modalTabsContent">
        <!-- General Tab Content -->
        <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'dataTab'}" id="dataTab" role="tabpanel" aria-labelledby="home-tab">
      <div class="row g-3"> <!-- g-3 adds consistent gap between columns -->
        <div class="col-md-4"> <!-- Column for the first dropdown -->
          <label class="col-form-label fw-bold fs-6">Forms</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="formlist"
            [items]="listofDeviceIds"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Form"
            (selectionChanges)="selectFormParams($event)"
        > <!-- Ensures dropdown takes full width of column -->
          </ngx-select>
        </div>
        <div class="col-md-4">
          <label for="parameterName" class="col-form-label fw-bold fs-6">Parameter</label>
          <ngx-select
            id="parameterName"
            [allowClear]="true"
            formControlName="parameterName"
            [items]="listofDynamicParam"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Parameter"
            style="width: 100%;">
          </ngx-select>
        </div>
  
        <div class="col-md-4"> <!-- Column for the second dropdown -->
          <label class="col-form-label fw-bold fs-6 required">Group By</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="groupBy"
            [items]="groupByOptions"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Group"
     
            class="w-100"> <!-- Ensures dropdown takes full width of column -->
          </ngx-select>
        </div>
        <div class="fv-row">
          <div class="row">
              <div class="col-md-4"> <!-- Column for the first dropdown -->
                  <label class="col-form-label fw-bold fs-6 required">Primary Value
                    <span class="ms-2 text-primary" 
                    data-bs-toggle="tooltip" 
                    data-bs-placement="top" 
                    title="Show Value As">
                <i class="bi bi-info-circle fs-5"></i>
              </span>
                  </label>
                  <ngx-select
                      [allowClear]="true"
                      name="primary-icon"
                      formControlName="primaryValue"
                      [items]="showValues"
                      optionValueField="value"
                      optionTextField="text"
                      placeholder="Select Group"
                      class="w-100"> <!-- Ensures dropdown takes full width of column -->
                  </ngx-select>
              </div>



              <div class="col-md-4" *ngIf="primaryValue3?.value === 'Constant'">
                <label for="constant12" class="col-form-label fw-bold fs-6 required">Constant</label>
                <input
                  id="constant3"
                  type="number"
                  class="form-control form-control-solid"
                  placeholder="Select constant"
                  formControlName="constantValue"
                  (change)="onValueChange3($event)" 
                />
              </div>
              <div class="col-md-4"> <!-- Column for the second dropdown -->
                  <label class="col-form-label fw-bold fs-6 required">Compare From
                    <span class="ms-2 text-primary" 
                    data-bs-toggle="tooltip" 
                    data-bs-placement="top" 
                    title="Comparision Indicator">
                <i class="bi bi-info-circle fs-5"></i>
              </span>
                  </label>
                  <ngx-select
                      [allowClear]="true"
                      name="secondary-icon"
                      formControlName="CompareTile"
                      [items]="showValues"
                      optionValueField="value"
                      optionTextField="text"
                      placeholder="Select ComparisionValue"
                      class="w-100"> <!-- Ensures dropdown takes full width of column -->
                  </ngx-select>
              </div>

              <div class="col-md-4"> <!-- Column for the second dropdown -->
                <label class="col-form-label fw-bold fs-6 required">Compare To
                  <span class="ms-2 text-primary" 
                  data-bs-toggle="tooltip" 
                  data-bs-placement="top" 
                  title="Comparision Indicator">
              <i class="bi bi-info-circle fs-5"></i>
            </span>
                </label>
                <ngx-select
                    [allowClear]="true"
                    name="secondary-icon"
                    formControlName="WithCompareTile"
                    [items]="showValues"
                    optionValueField="value"
                    optionTextField="text"
                    placeholder="Select ComparisionValue"
                    class="w-100"> <!-- Ensures dropdown takes full width of column -->
                </ngx-select>
            </div>



    
    
              <div class="col-md-4">
                <label for="groupByFormat" class="col-form-label fw-bold fs-6 required">GroupByFormat</label>
                <input
                  id="groupByFormat"
                  type="text"
                  class="form-control form-control-solid"
                  placeholder="Select GroupByFormat"
                  [formControl]="groupByFormatControl3" 
                  (click)="openModalCalender3()"
                  readonly /> <!-- Make it readonly to prevent manual input -->
              
    
              </div>

              <div class="col-md-4" *ngIf="showIdField">
                <label for="id" class="col-form-label fw-bold fs-6 required">ID</label>
                <input
                  id="id"
                  type="number"
                  class="form-control form-control-solid"
                  placeholder="Enter ID"
                  formControlName="widgetid" 
                />
              </div>

              <div class="col-md-4" >
                <label for="constant" class="col-form-label fw-bold fs-6 required">Processed Value</label>
                <input
                  type="text"
                  class="form-control form-control-solid"
                  placeholder="Select Processed Value"
                  formControlName="processed_value"
                />
              </div>
          </div>
      </div>
      
      </div>
      </div>

      <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'settings-tab'}" id="settings-tab" role="tabpanel" aria-labelledby="settings-tabpane">
        <!-- Themes Section -->
        <div class="row g-3">
        <div class="col-md-6">
          <label class="col-form-label fw-bold fs-6 required">Themes:</label>
          <div class="color-boxes">
            <div
            *ngFor="let theme of themes"
            class="color-box"
            [ngStyle]="{ 'background-color': theme.color }"
            (click)="toggleCheckbox3(theme)"  
            [class.checked]="theme.selected"
          >
            <div *ngIf="theme.selected" class="checkmark">✔</div>
          </div>
          
          </div>
        </div>
        
        <!-- Custom Color Picker Section -->
        <div class="col-md-6">
          <label class="col-form-label fw-bold fs-6">Custom:</label>
          <div class="d-flex align-items-center">
            <input
            type="color"
            id="customColor"
            class="form-control form-control-solid"
            style="width: 40px; height: 40px;"
            [value]="selectedColor"
            formControlName="themeColor"
            (input)="onColorChange3($event)"
          />
            <!-- <span class="fs-6 ms-2">A</span> -->
          </div>
        </div>
        </div>
        
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                  </div>
      </div>
    </div>
  </div>
  

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
  <button type="button" class="btn btn-primary" (click)="addTile('tile4'); modal.dismiss()" [disabled]="createKPIWidget3.invalid" *ngIf="!isEditMode">Save</button> <!-- Save button shown only in add mode -->
  <button type="button" class="btn btn-warning" (click)="updateTile3(); modal.dismiss()"  *ngIf="isEditMode">Update</button> <!-- Update button shown only in edit mode -->
</div>
</div>
</ng-template>
<ng-template #KPIModal4 let-modal>
<div class="modal-header">
  <h4 class="modal-title">KPI Widget-5</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
</div>
<div class="fv-row" [formGroup]="createKPIWidget4">
  <div class="modal-body">
    <div class="card-body pt-0">

      <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bolder flex-nowrap" id="myTab_settings1" role="tablist">
        <div class="col-6" role="Data">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="home-tab" data-bs-toggle="tab" role="tab" aria-controls="dataTab" aria-selected="false" (click)="selectedSettingsTab('dataTab')">Data</a>
          </li>
        </div>
        <div class="col-6" role="Settings">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="settings-tabpane" data-bs-toggle="tab" role="tab" aria-controls="settings-tab" aria-selected="false" (click)="selectedSettingsTab('settings-tab')">Settings</a>
          </li>
        </div>
      </ul>

      <div class="tab-content mt-3" id="modalTabsContent">
        <!-- General Tab Content -->
        <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'dataTab'}" id="dataTab" role="tabpanel" aria-labelledby="home-tab">
      <div class="row g-3"> <!-- g-3 adds consistent gap between columns -->
        <div class="col-md-4"> <!-- Column for the first dropdown -->
          <label class="col-form-label fw-bold fs-6">Forms</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="formlist"
            [items]="listofDeviceIds"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Form"
            (selectionChanges)="selectFormParams($event)"
        > <!-- Ensures dropdown takes full width of column -->
          </ngx-select>
        </div>
        <div class="col-md-4">
          <label for="parameterName" class="col-form-label fw-bold fs-6">Parameter</label>
          <ngx-select
            id="parameterName"
            [allowClear]="true"
            formControlName="parameterName"
            [items]="listofDynamicParam"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Parameter"
            style="width: 100%;">
          </ngx-select>
        </div>
  
        <div class="col-md-4"> <!-- Column for the second dropdown -->
          <label class="col-form-label fw-bold fs-6 required">Group By</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="groupBy"
            [items]="groupByOptions"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Group"
     
            class="w-100"> <!-- Ensures dropdown takes full width of column -->
          </ngx-select>
        </div>
        <div class="fv-row">
          <div class="row">
              <div class="col-md-4"> <!-- Column for the first dropdown -->
                  <label class="col-form-label fw-bold fs-6 required">Primary Value
                    <span class="ms-2 text-primary" 
                    data-bs-toggle="tooltip" 
                    data-bs-placement="top" 
                    title="Show Value As">
                <i class="bi bi-info-circle fs-5"></i>
              </span>
                  </label>
                  <ngx-select
                      [allowClear]="true"
                      name="primary-icon"
                      formControlName="primaryValue"
                      [items]="showValues"
                      optionValueField="value"
                      optionTextField="text"
                      placeholder="Select Group"
                      class="w-100"> <!-- Ensures dropdown takes full width of column -->
                  </ngx-select>
              </div>



              <div class="col-md-4" *ngIf="primaryValue4?.value === 'Constant'">
                <label for="constant12" class="col-form-label fw-bold fs-6 required">Constant</label>
                <input
                  id="constant4"
                  type="number"
                  class="form-control form-control-solid"
                  placeholder="Select constant"
                  formControlName="constantValue"
                  (change)="onValueChange3($event)" 
                />
              </div>
              <div class="col-md-4"> <!-- Column for the second dropdown -->
                  <label class="col-form-label fw-bold fs-6 required">Compare From
                    <span class="ms-2 text-primary" 
                    data-bs-toggle="tooltip" 
                    data-bs-placement="top" 
                    title="Comparision Indicator">
                <i class="bi bi-info-circle fs-5"></i>
              </span>
                  </label>
                  <ngx-select
                      [allowClear]="true"
                      name="secondary-icon"
                      formControlName="CompareTile"
                      [items]="showValues"
                      optionValueField="value"
                      optionTextField="text"
                      placeholder="Select ComparisionValue"
                      class="w-100"> <!-- Ensures dropdown takes full width of column -->
                  </ngx-select>
              </div>

              <div class="col-md-4"> <!-- Column for the second dropdown -->
                <label class="col-form-label fw-bold fs-6 required">Compare To
                  <span class="ms-2 text-primary" 
                  data-bs-toggle="tooltip" 
                  data-bs-placement="top" 
                  title="Comparision Indicator">
              <i class="bi bi-info-circle fs-5"></i>
            </span>
                </label>
                <ngx-select
                    [allowClear]="true"
                    name="secondary-icon"
                    formControlName="WithCompareTile"
                    [items]="showValues"
                    optionValueField="value"
                    optionTextField="text"
                    placeholder="Select ComparisionValue"
                    class="w-100"> <!-- Ensures dropdown takes full width of column -->
                </ngx-select>
            </div>



    
    
              <div class="col-md-4">
                <label for="groupByFormat" class="col-form-label fw-bold fs-6 required">GroupByFormat</label>
                <input
                  id="groupByFormat"
                  type="text"
                  class="form-control form-control-solid"
                  placeholder="Select GroupByFormat"
                  [formControl]="groupByFormatControl4" 
                  (click)="openModalCalender4()"
                  readonly /> <!-- Make it readonly to prevent manual input -->
              
    
              </div>
              <div class="col-md-4"> <!-- Column for the second dropdown -->
                <label class="col-form-label fw-bold fs-6 required">Secondary Value
                  <span class="ms-2 text-primary" 
                  data-bs-toggle="tooltip" 
                  data-bs-placement="top" 
                  title="Show Value As">
              <i class="bi bi-info-circle fs-5"></i>
            </span>
                </label>
                <ngx-select
                    [allowClear]="true"
                    name="secondary-icon"
                    formControlName="secondaryValue"
                    [items]="showValues"
                    optionValueField="value"
                    optionTextField="text"
                    placeholder="Select Secondary Value"
                    class="w-100"> <!-- Ensures dropdown takes full width of column -->
                </ngx-select>
            </div>

            <div class="col-md-4" *ngIf="showIdField">
              <label for="id" class="col-form-label fw-bold fs-6 required">ID</label>
              <input
                id="id"
                type="number"
                class="form-control form-control-solid"
                placeholder="Enter ID"
                formControlName="widgetid" 
              />
            </div>

            <div class="col-md-4" >
              <label for="constant" class="col-form-label fw-bold fs-6 required">Processed Value</label>
              <input
                type="text"
                class="form-control form-control-solid"
                placeholder="Select Processed Value"
                formControlName="processed_value"
              />
            </div>
          </div>
      </div>
      
      </div>
        </div>

        <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'settings-tab'}" id="settings-tab" role="tabpanel" aria-labelledby="settings-tabpane">
          <!-- Themes Section -->
          <div class="row g-3">
          <div class="col-md-6">
            <label class="col-form-label fw-bold fs-6 required">Themes:</label>
            <div class="color-boxes">
              <div
              *ngFor="let theme of themes"
              class="color-box"
              [ngStyle]="{ 'background-color': theme.color }"
              (click)="toggleCheckbox4(theme)"  
              [class.checked]="theme.selected"
            >
              <div *ngIf="theme.selected" class="checkmark">✔</div>
            </div>
            
            </div>
          </div>
          
          <!-- Custom Color Picker Section -->
          <div class="col-md-6">
            <label class="col-form-label fw-bold fs-6">Custom:</label>
            <div class="d-flex align-items-center">
              <input
              type="color"
              id="customColor"
              class="form-control form-control-solid"
              style="width: 40px; height: 40px;"
              [value]="selectedColor"
              formControlName="themeColor"
              (input)="onColorChange4($event)"
            />
              <!-- <span class="fs-6 ms-2">A</span> -->
            </div>
          </div>
          </div>
          
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                    </div>
      </div>


    </div>
  </div>
  

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
  <button type="button" class="btn btn-primary" (click)="addTile('tile5'); modal.dismiss()" [disabled]="createKPIWidget4.invalid" *ngIf="!isEditMode">Save</button> <!-- Save button shown only in add mode -->
  <button type="button" class="btn btn-warning" (click)="updateTile4(); modal.dismiss()"  *ngIf="isEditMode">Update</button> <!-- Update button shown only in edit mode -->
</div>
</div>
</ng-template>


<ng-template #KPIModal5 let-modal>
<div class="modal-header">
  <h4 class="modal-title">KPI Widget-6</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
</div>
<div class="fv-row" [formGroup]="createKPIWidget5">
  <div class="modal-body">
    <div class="card-body pt-0">


      <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bolder flex-nowrap" id="myTab_settings1" role="tablist">
        <div class="col-6" role="Data">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="home-tab" data-bs-toggle="tab" role="tab" aria-controls="dataTab" aria-selected="false" (click)="selectedSettingsTab('dataTab')">Data</a>
          </li>
        </div>
        <div class="col-6" role="Settings">
          <li class="nav-item">
            <a class="nav-link text-active-primary me-6" id="settings-tabpane" data-bs-toggle="tab" role="tab" aria-controls="settings-tab" aria-selected="false" (click)="selectedSettingsTab('settings-tab')">Settings</a>
          </li>
        </div>
      </ul>

      <div class="tab-content mt-3" id="modalTabsContent">
        <!-- General Tab Content -->
        <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'dataTab'}" id="dataTab" role="tabpanel" aria-labelledby="home-tab">
      <div class="row g-3"> <!-- g-3 adds consistent gap between columns -->
        <div class="col-md-4"> <!-- Column for the first dropdown -->
          <label class="col-form-label fw-bold fs-6">Forms</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="formlist"
            [items]="listofDeviceIds"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Form"
            (selectionChanges)="selectFormParams($event)"
        > <!-- Ensures dropdown takes full width of column -->
          </ngx-select>
        </div>
        <div class="col-md-4">
          <label for="parameterName" class="col-form-label fw-bold fs-6">Parameter</label>
          <ngx-select
            id="parameterName"
            [allowClear]="true"
            formControlName="parameterName"
            [items]="listofDynamicParam"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Parameter"
            style="width: 100%;">
          </ngx-select>
        </div>
  
        <div class="col-md-4"> <!-- Column for the second dropdown -->
          <label class="col-form-label fw-bold fs-6 required">Group By</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="groupBy"
            [items]="groupByOptions"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Group"
     
            class="w-100"> <!-- Ensures dropdown takes full width of column -->
          </ngx-select>
        </div>
        <div class="fv-row">
          <div class="row">
              <div class="col-md-4"> <!-- Column for the first dropdown -->
                  <label class="col-form-label fw-bold fs-6 required">Primary Value
                    <span class="ms-2 text-primary" 
                    data-bs-toggle="tooltip" 
                    data-bs-placement="top" 
                    title="Show Value As">
                <i class="bi bi-info-circle fs-5"></i>
              </span>
                  </label>
                  <ngx-select
                      [allowClear]="true"
                      name="primary-icon"
                      formControlName="primaryValue"
                      [items]="showValues"
                      optionValueField="value"
                      optionTextField="text"
                      placeholder="Select Group"
                      class="w-100"> <!-- Ensures dropdown takes full width of column -->
                  </ngx-select>
              </div>

              <div class="col-md-4" *ngIf="primaryValue5?.value === 'Constant'">
                <label for="constant12" class="col-form-label fw-bold fs-6 required">Constant</label>
                <input
                  id="constant5"
                  type="number"
                  class="form-control form-control-solid"
                  placeholder="Select constant"
                  formControlName="constantValue"
                  (change)="onValueChange5($event)" 
                />
              </div>
              <div class="col-md-4"> <!-- Column for the second dropdown -->
                  <label class="col-form-label fw-bold fs-6 required">Secondary Value
                    <span class="ms-2 text-primary" 
                    data-bs-toggle="tooltip" 
                    data-bs-placement="top" 
                    title="Show Value As">
                <i class="bi bi-info-circle fs-5"></i>
              </span>
                  </label>
                  <ngx-select
                      [allowClear]="true"
                      name="secondary-icon"
                      formControlName="secondaryValue"
                      [items]="showValues"
                      optionValueField="value"
                      optionTextField="text"
                      placeholder="Select Secondary Value"
                      class="w-100"> <!-- Ensures dropdown takes full width of column -->
                  </ngx-select>
              </div>

              <div class="col-md-4"> <!-- Column for the second dropdown -->
                <label class="col-form-label fw-bold fs-6 required">Tertiary Value
                  <span class="ms-2 text-primary" 
                  data-bs-toggle="tooltip" 
                  data-bs-placement="top" 
                  title="Show Value As">
              <i class="bi bi-info-circle fs-5"></i>
            </span>
                </label>
                <ngx-select
                    [allowClear]="true"
                    name="secondary-icon"
                    formControlName="secondaryValueNested"
                    [items]="showValues"
                    optionValueField="value"
                    optionTextField="text"
                    placeholder="Select Secondary Value"
                    class="w-100"> <!-- Ensures dropdown takes full width of column -->
                </ngx-select>
            </div>



    
    
              <div class="col-md-4">
                <label for="groupByFormat" class="col-form-label fw-bold fs-6 required">GroupByFormat</label>
                <input
                  id="groupByFormat"
                  type="text"
                  class="form-control form-control-solid"
                  placeholder="Select GroupByFormat"
                  [formControl]="groupByFormatControl5" 
                  (click)="openModalCalender5()"
                  readonly /> <!-- Make it readonly to prevent manual input -->
              
    
              </div>


              <div class="col-md-4" *ngIf="showIdField">
                <label for="id" class="col-form-label fw-bold fs-6 required">ID</label>
                <input
                  id="id"
                  type="number"
                  class="form-control form-control-solid"
                  placeholder="Enter ID"
                  formControlName="widgetid" 
                />
              </div>

              <div class="col-md-4" >
                <label for="constant" class="col-form-label fw-bold fs-6 required">Processed Value</label>
                <input
                  type="text"
                  class="form-control form-control-solid"
                  placeholder="Select Processed Value"
                  formControlName="processed_value"
                />
              </div>
          </div>
      </div>
      
      </div>
        </div>

        <div [ngClass]="{'tab-pane fade': true, 'show active': selectedTabset === 'settings-tab'}" id="settings-tab" role="tabpanel" aria-labelledby="settings-tabpane">
          <!-- Themes Section -->
          <div class="row g-3">
          <div class="col-md-6">
            <label class="col-form-label fw-bold fs-6 required">Themes:</label>
            <div class="color-boxes">
              <div
              *ngFor="let theme of themes"
              class="color-box"
              [ngStyle]="{ 'background-color': theme.color }"
              (click)="toggleCheckbox5(theme)"  
              [class.checked]="theme.selected"
            >
              <div *ngIf="theme.selected" class="checkmark">✔</div>
            </div>
            
            </div>
          </div>
          
          <!-- Custom Color Picker Section -->
          <div class="col-md-6">
            <label class="col-form-label fw-bold fs-6">Custom:</label>
            <div class="d-flex align-items-center">
              <input
              type="color"
              id="customColor"
              class="form-control form-control-solid"
              style="width: 40px; height: 40px;"
              [value]="selectedColor"
              formControlName="themeColor"
              (input)="onColorChange5($event)"
            />
              <!-- <span class="fs-6 ms-2">A</span> -->
            </div>
          </div>
          </div>
          
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                    </div>
      </div>
    </div>
  </div>
  

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
  <button type="button" class="btn btn-primary" (click)="addTile('tile6'); modal.dismiss()" [disabled]="createKPIWidget5.invalid" *ngIf="!isEditMode">Save</button> <!-- Save button shown only in add mode -->
  <button type="button" class="btn btn-warning" (click)="updateTile5(); modal.dismiss()" *ngIf="isEditMode">Update</button> <!-- Update button shown only in edit mode -->
</div>
</div>
</ng-template>

<ng-template #KPIModal6 let-modal>
<div class="modal-header">
  <h4 class="modal-title">KPI Widget-7</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
</div>
<div class="fv-row" [formGroup]="createKPIWidget6">
  <div class="modal-body">
    <div class="card-body pt-0">
      <div class="row g-3"> <!-- g-3 adds consistent gap between columns -->
        <div class="col-md-4"> <!-- Column for the first dropdown -->
          <label class="col-form-label fw-bold fs-6">Forms</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="formlist"
            [items]="listofDeviceIds"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Form"
            (selectionChanges)="selectFormParams($event)"
        > <!-- Ensures dropdown takes full width of column -->
          </ngx-select>
        </div>
        <div class="col-md-4">
          <label for="parameterName" class="col-form-label fw-bold fs-6">Parameter</label>
          <ngx-select
            id="parameterName"
            [allowClear]="true"
            formControlName="parameterName"
            [items]="listofDynamicParam"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Parameter"
            style="width: 100%;">
          </ngx-select>
        </div>
        <div class="col-md-4"> <!-- Column for the first dropdown -->
          <label class="col-form-label fw-bold fs-6 required">Value</label>
          <ngx-select
              [allowClear]="true"
              name="primary-icon"
              formControlName="value"
              [items]="showValues"
              optionValueField="value"
              optionTextField="text"
              placeholder="Select Group"
              (change)="onValue($event)"
              class="w-100"> <!-- Ensures dropdown takes full width of column -->
      
          </ngx-select>
      </div>

      <div class="col-md-4" *ngIf="value1?.value === 'Constant'">
        <label for="constant12" class="col-form-label fw-bold fs-6 required">Constant</label>
        <input
          id="constant6"
          type="number"
          class="form-control form-control-solid"
          placeholder="Select constant"
          formControlName="constantValuevalue"
          (change)="onValueChangevalue1($event)" 
        />
      </div>
      <div class="col-md-4" *ngIf="value1?.value && value1?.value !== 'Constant'">
        <label for="percentageValue" class="col-form-label fw-bold fs-6 required">Percentage</label>
        <div style="display: flex; align-items: center;">
            <input
                id="percentageValue"
                type="number"
                class="form-control form-control-solid"
                placeholder="Enter percentage"
                formControlName="percentageValue" 
                style="flex: 1; margin-right: 5px;" 
            />
            <span>%</span> <!-- Displays percentage sign next to the input -->
        </div>
    </div>
    
  
        <!-- <div class="col-md-4"> 
          <label class="col-form-label fw-bold fs-6 required">Group By</label>
          <ngx-select
            [allowClear]="true"
            name="icon"
            formControlName="groupBy"
            [items]="groupByOptions"
            optionValueField="value"
            optionTextField="text"
            placeholder="Select Group"
     
            class="w-100"> 
          </ngx-select>
        </div> -->
        <div class="fv-row">
          <div class="row">


            <div class="col-md-4"> <!-- Column for the first dropdown -->
              <label class="col-form-label fw-bold fs-6 required">Target</label>
              <ngx-select
                  [allowClear]="true"
                  name="primary-icon"
                  formControlName="Target"
                  [items]="showValues"
                  optionValueField="value"
                  optionTextField="text"
                  placeholder="Select Group"
                  (change)="onTarget($event)"
                  class="w-100"> <!-- Ensures dropdown takes full width of column -->
              </ngx-select>
          </div>



          <div class="col-md-4" *ngIf="Target1?.value === 'Constant'">
            <label for="constant12" class="col-form-label fw-bold fs-6 required">Constant</label>
            <input
              id="constant6"
              type="number"
              class="form-control form-control-solid"
              placeholder="Select constant"
              formControlName="constantValueTarget"
              (change)="onValueChange6($event)" 
            />
          </div>
          <div class="col-md-4" *ngIf="Target1?.value && Target1?.value !== 'Constant'">
            <label for="percentageValue" class="col-form-label fw-bold fs-6 required">Percentage</label>
            <div style="display: flex; align-items: center;">
                <input
                    id="percentageValueTarget"
                    type="number"
                    class="form-control form-control-solid"
                    placeholder="Enter percentage"
                    formControlName="percentageValueTarget" 
                    style="flex: 1; margin-right: 5px;" 
                />
                <span>%</span> <!-- Displays percentage sign next to the input -->
            </div>
        </div>

          <div class="col-md-4"> <!-- Column for the first dropdown -->
            <label class="col-form-label fw-bold fs-6 required">Max Range</label>
            <ngx-select
                [allowClear]="true"
                name="primary-icon"
                formControlName="MaxRange"
                [items]="showValues"
                optionValueField="value"
                optionTextField="text"
                placeholder="Select Group"
                (change)="onMaxRange1($event)"
                class="w-100"> <!-- Ensures dropdown takes full width of column -->
            </ngx-select>
        </div>
        <div class="col-md-4" *ngIf="MaxRange1?.value === 'Constant'">
          <label for="constant12" class="col-form-label fw-bold fs-6 required">Constant</label>
          <input
            id="constant6"
            type="number"
            class="form-control form-control-solid"
            placeholder="Select constant"
            formControlName="constantValueMaxRange"
            (change)="onValueChangeMaxRange1($event)" 
          />
        </div>
        <div class="col-md-4" *ngIf="MaxRange1?.value && MaxRange1?.value !== 'Constant'">
          <label for="percentageValue" class="col-form-label fw-bold fs-6 required">Percentage</label>
          <div style="display: flex; align-items: center;">
              <input
                  id="percentageValueMaxRange"
                  type="number"
                  class="form-control form-control-solid"
                  placeholder="Enter percentage"
                  formControlName="percentageValueMaxRange" 
                  style="flex: 1; margin-right: 5px;" 
              />
              <span>%</span> <!-- Displays percentage sign next to the input -->
          </div>
      </div>
    
    
              <div class="col-md-4">
                <label for="groupByFormat" class="col-form-label fw-bold fs-6 required">GroupByFormat</label>
                <input
                  id="groupByFormat"
                  type="text"
                  class="form-control form-control-solid"
                  placeholder="Select GroupByFormat"
                  [formControl]="groupByFormatControl6" 
                  (click)="openModalCalender6()"
                  readonly /> <!-- Make it readonly to prevent manual input -->
              
    
              </div>

              <div class="col-md-4" *ngIf="showIdField">
                <label for="id" class="col-form-label fw-bold fs-6 required">ID</label>
                <input
                  id="id"
                  type="number"
                  class="form-control form-control-solid"
                  placeholder="Enter ID"
                  formControlName="widgetid" 
                />
              </div>
          </div>
      </div>
      
      </div>
    </div>
  </div>
  

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
  <button type="button" class="btn btn-primary" (click)="addTile('tile7'); modal.dismiss()"  *ngIf="!isEditMode">Save</button> <!-- Save button shown only in add mode -->
  <button type="button" class="btn btn-warning" (click)="updateTile5(); modal.dismiss()" *ngIf="isEditMode">Update</button> <!-- Update button shown only in edit mode -->
</div>
</div>
</ng-template>


<ng-template #TitleModal let-modal>
  <div class="modal-content" style="border-radius: 8px; overflow: hidden;">
    <div class="modal-header">
      <h4 class="modal-title">Add Title</h4>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>

    <div class="fv-row" [formGroup]="createTitle">
      <div class="modal-body">
        <div class="card-body pt-0">

          <!-- Rich Text Editor Toolbar -->
          <div class="editor-toolbar d-flex align-items-center gap-2 mb-3">
            <button
            type="button"
            class="btn btn-light"
            [class.active]="createTitle.value.fontStyle === 'italic'"
            (click)="toggleItalic()"
          >
            <i>I</i>
          </button>
            <!-- Bold Button -->
            <button
              type="button"
              class="btn btn-light"
              [class.active]="createTitle.value.fontWeight === 'bold'"
              (click)="toggleBold()"
            >
              <b>B</b>
            </button>
          
            <!-- Italic Button -->
         
          
            <!-- Underline Button -->
            <button
              type="button"
              class="btn btn-light"
              [class.active]="createTitle.value.textDecoration === 'underline'"
              (click)="toggleUnderline()"
            >
              <u>U</u>
            </button>
          
            <!-- Alignment Buttons -->
            <button
              type="button"
              class="btn btn-light"
              [class.active]="createTitle.value.textAlign === 'left'"
              (click)="setTextAlignment('left')"
            >
              <i class="bi bi-text-left"></i>
            </button>
            <button
              type="button"
              class="btn btn-light"
              [class.active]="createTitle.value.textAlign === 'center'"
              (click)="setTextAlignment('center')"
            >
              <i class="bi bi-text-center"></i>
            </button>
            <button
              type="button"
              class="btn btn-light"
              [class.active]="createTitle.value.textAlign === 'right'"
              (click)="setTextAlignment('right')"
            >
              <i class="bi bi-text-right"></i>
            </button>
          
            <!-- Font Family Selector -->
            <select
            class="form-select"
            (change)="onFontChange($event)"
            [value]="createTitle.value.fontFamily"
            style="width: auto;"
          >
            <option value="Lato">Lato</option>
            <option value="Open Sans">Open Sans</option>
            <option value="Roboto">Roboto</option>
            <option value="Serif">Serif</option>
            <option value="Arial">Arial</option>
            <option value="Courier New">Courier New</option>
            <option value="Georgia">Georgia</option>
            <option value="Tahoma">Tahoma</option>
            <option value="Times New Roman">Times New Roman</option>
            <option value="Trebuchet MS">Trebuchet MS</option>
            <option value="Verdana">Verdana</option>
            <option value="Comic Sans MS">Comic Sans MS</option>
            <option value="Calibri">Calibri</option>
            <option value="Lucida Sans Unicode">Lucida Sans Unicode</option>
            <option value="Impact">Impact</option>
            <option value="Garamond">Garamond</option>
            <option value="Palatino Linotype">Palatino Linotype</option>
            <option value="Arial Black">Arial Black</option>
          </select>
          
          
            <!-- Font Size Selector -->
            <select
            class="form-select"
            (change)="onFontSizeChange($event)"
            [value]="createTitle.value.fontSize"
            style="width: auto;"
          >
            <option value="8px">8</option>
            <option value="10px">10</option>
            <option value="12px">12</option>
            <option value="14px">14</option>
            <option value="16px">16</option>
            <option value="18px">18</option>
            <option value="20px">20</option>
            <option value="22px">22</option>
            <option value="24px">24</option>
            <option value="26px">26</option>
            <option value="28px">28</option>
            <option value="30px">30</option>
            <option value="36px">36</option>
            <option value="42px">42</option>
            <option value="48px">48</option>
            <option value="56px">56</option>
            <option value="64px">64</option>
            <option value="72px">72</option>
            <option value="80px">80</option>
            <option value="90px">90</option>
            <option value="100px">100</option>
          </select>
          
          
            <!-- Background Color Picker -->

            
          </div>
          <div class="color-picker-row" style="display: flex; gap: 1rem; align-items: center;">
            <!-- Background Color Picker -->
            <div class="color-picker-container">
              <label for="bgColorPicker" class="form-label">Choose Background Color:</label>
              <input
                id="bgColorPicker"
                type="color"
                class="form-control-color"
                [value]="createTitle.value.themeColor || '#ffffff'"
                (input)="updateNameContainerColor($event)"
                [style.background]="createTitle.value.themeColor || '#ffffff'"
                title="Choose Name container background color"
              />
            </div>
            
            <!-- Text Color Picker -->
            <div class="color-picker-container">
              <label for="textColorPicker" class="form-label">Choose Text Color:</label>
              <input
                id="textColorPicker"
                type="color"
                class="form-control-color"
                [value]="createTitle.value.textColor || '#000000'"
                (input)="updateTextColor($event)"
                [style.background]="createTitle.value.textColor || '#000000'"
                title="Choose text color"
              />
            </div>
          </div>
          
          
          <!-- Name Container -->
          <div
          class="col-md-12"
          style="padding: 10px; border-radius: 8px;"
        >
          <label class="col-form-label fw-bold fs-6 required">Name</label>
          <div
          formControlName="customLabel"
          contenteditable="true"
          class="form-control form-control-solid rich-text-editor"
          [style.font-family]="createTitle.value.fontFamily"
          [style.font-size]="createTitle.value.fontSize"
          [style.text-align]="createTitle.value.textAlign"
          [style.font-weight]="createTitle.value.fontWeight"
          [style.font-style]="createTitle.value.fontStyle"
          [style.text-decoration]="createTitle.value.textDecoration"
          [style.background-color]="createTitle.value.themeColor"
          [style.color]="createTitle.value.textColor"
          (input)="updateCustomLabel($event)"
          [textContent]="createTitle.value.customLabel"
        >
        </div>
        
        
        
        
          <!-- Validation Feedback -->
          <div
            class="invalid-feedback"
            *ngIf="createTitle.get('customLabel')?.invalid && createTitle.get('customLabel')?.touched"
            style="padding: 5px; border-radius: 5px;"
          >
            Title Name is required
          </div>
        </div>
        
          
        


        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Close</button>
        <button type="button" class="btn btn-primary" (click)="addTile('title'); modal.dismiss()" *ngIf="!isEditMode">Save</button>
        <button type="button" class="btn btn-warning" (click)="updateTitle(); modal.dismiss()" *ngIf="isEditMode">Update</button>
      </div>
    </div>
  </div>
</ng-template>









<!-- *ngIf="!All_button_permissions" -->